
# ğŸ§­ Layouts trong Next.js

### ğŸ¯ Má»¥c tiÃªu

* Hiá»ƒu **layout lÃ  gÃ¬** vÃ  **vÃ¬ sao nÃ³ quan trá»ng** trong App Router.
* Biáº¿t cÃ¡ch táº¡o `layout.tsx` vÃ  cÃ¡ch nÃ³ **bá»c cÃ¡c trang con**.
* Náº¯m Ä‘Æ°á»£c **luá»“ng render layout â†’ page** trong Next.js.

---

## ğŸ§± 1ï¸âƒ£ Layout lÃ  gÃ¬?

> Trong App Router, **layout.tsx** lÃ  file Ä‘á»‹nh nghÄ©a *UI khung (frame)* bao quanh cÃ¡c trang con (`page.tsx`).

* NÃ³ giÃºp **tÃ¡i sá»­ dá»¥ng cáº¥u trÃºc giao diá»‡n** (menu, header, footer...).
* NÃ³ cÃ³ thá»ƒ **lá»“ng nhau** (nested layouts).
* VÃ  Ä‘áº·c biá»‡t: **layout khÃ´ng bá»‹ unmount** khi chuyá»ƒn giá»¯a cÃ¡c trang con.

---

### ğŸ§© VÃ­ dá»¥ cÆ¡ báº£n

Cáº¥u trÃºc thÆ° má»¥c:

```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ page.tsx
â””â”€â”€ about/
    â””â”€â”€ page.tsx
```

---

ğŸ“„ **app/layout.tsx**

```tsx
// ÄÃ¢y lÃ  Root Layout â€” bao quanh toÃ n bá»™ á»©ng dá»¥ng
export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body
        style={{
          fontFamily: "sans-serif",
          padding: "2rem",
          background: "#f9fafb",
        }}
      >
        <header
          style={{
            borderBottom: "1px solid #ccc",
            paddingBottom: "1rem",
            marginBottom: "1rem",
          }}
        >
          <h1>ğŸŒ My Website</h1>
          <nav style={{ display: "flex", gap: "1rem" }}>
            <a href="/">Home</a>
            <a href="/about">About</a>
          </nav>
        </header>
        {children}
      </body>
    </html>
  );
}
```

---

ğŸ“„ **app/page.tsx**

```tsx
export default function HomePage() {
  return (
    <div>
      <h2>ğŸ  Home Page</h2>
      <p>Welcome to the homepage of our Next.js site.</p>
    </div>
  );
}
```

---

ğŸ“„ **app/about/page.tsx**

```tsx
export default function AboutPage() {
  return (
    <div>
      <h2>ğŸ“˜ About Page</h2>
      <p>This site is built with Next.js App Router.</p>
    </div>
  );
}
```

---

## âš™ï¸ 2ï¸âƒ£ Khi render, Next.js lÃ m gÃ¬?

Khi báº¡n truy cáº­p `/about`, Next.js sáº½:

1. Render `app/layout.tsx` â†’ Root Layout
2. Render `app/about/page.tsx` â†’ Page con
3. Gáº¯n `children` cá»§a layout = ná»™i dung trang con.

â¡ Káº¿t quáº£ HTML:

```html
<html>
  <body>
    <header>ğŸŒ My Website ...</header>
    <h2>ğŸ“˜ About Page</h2>
    <p>This site is built with Next.js App Router.</p>
  </body>
</html>
```

---

## ğŸ§  3ï¸âƒ£ Lá»£i Ã­ch cá»§a Layout

âœ… Dá»… tÃ¡i sá»­ dá»¥ng UI (menu, header, sidebar...)
âœ… KhÃ´ng bá»‹ reload khi chuyá»ƒn trang
âœ… CÃ³ thá»ƒ lá»“ng layout nhiá»u táº§ng (vÃ­ dá»¥ layout riÃªng cho `/dashboard`)
âœ… GiÃºp quáº£n lÃ½ state & tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng tá»‘t hÆ¡n

---

## ğŸ§© 4ï¸âƒ£ So sÃ¡nh layout vÃ  page

| ThÃ nh pháº§n   | Vai trÃ²                  | Render khi nÃ o                                  |
| ------------ | ------------------------ | ----------------------------------------------- |
| `layout.tsx` | Khung UI bao quanh route | Render **má»™t láº§n**, giá»¯ nguyÃªn khi chuyá»ƒn trang |
| `page.tsx`   | Ná»™i dung riÃªng cá»§a route | Render láº¡i khi route thay Ä‘á»•i                   |

---

## ğŸ’¬ 5ï¸âƒ£ BÃ i táº­p nhá»

> HÃ£y táº¡o cáº¥u trÃºc sau:

```
app/
â”œâ”€â”€ layout.tsx (Header + Footer)
â”œâ”€â”€ page.tsx (Home)
â””â”€â”€ about/
    â””â”€â”€ page.tsx (About)
```

Khi chuyá»ƒn giá»¯a `/` vÃ  `/about`:

* Header/Footer **khÃ´ng reload**
* Chá»‰ pháº§n ná»™i dung thay Ä‘á»•i


---

# ğŸŒ VÃ­ dá»¥ hoÃ n chá»‰nh: Layout cÆ¡ báº£n

### ğŸ§­ Cáº¥u trÃºc thÆ° má»¥c

```
app/
â”œâ”€â”€ layout.tsx        // Root Layout
â”œâ”€â”€ globals.css       // CSS chung (náº¿u cÃ³)
â”œâ”€â”€ page.tsx          // Home page
â””â”€â”€ about/
    â””â”€â”€ page.tsx      // About page
```

---

### ğŸ“„ `app/layout.tsx`

```tsx
import Link from "next/link";
import "./globals.css"; // optional

export const metadata = {
  title: "Next.js Layout Demo",
  description: "Understanding Root Layout in Next.js App Router",
};

// Root Layout: bá»c toÃ n bá»™ á»©ng dá»¥ng
export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body className="font-sans bg-gray-50 text-gray-900">
        <header className="border-b border-gray-300 p-4 bg-white shadow-sm sticky top-0 z-50">
          <h1 className="text-2xl font-bold mb-2">ğŸŒ My Website</h1>
          <nav className="flex gap-4">
            <Link href="/" className="text-blue-600 hover:underline">
              Home
            </Link>
            <Link href="/about" className="text-blue-600 hover:underline">
              About
            </Link>
          </nav>
        </header>

        <main className="p-6 min-h-[70vh]">{children}</main>

        <footer className="border-t border-gray-300 p-4 text-center text-sm text-gray-600 bg-white">
          Â© {new Date().getFullYear()} My Website. All rights reserved.
        </footer>
      </body>
    </html>
  );
}
```

---

### ğŸ“„ `app/page.tsx` (Home)

```tsx
export default function HomePage() {
  return (
    <section>
      <h2 className="text-xl font-semibold mb-2">ğŸ  Home Page</h2>
      <p>
        Welcome to the homepage! This layout stays visible even when you navigate
        between pages.
      </p>
    </section>
  );
}
```

---

### ğŸ“„ `app/about/page.tsx`

```tsx
export default function AboutPage() {
  return (
    <section>
      <h2 className="text-xl font-semibold mb-2">ğŸ“˜ About Page</h2>
      <p>
        This page is rendered inside the same Root Layout. Notice the header and
        footer do not reload.
      </p>
    </section>
  );
}
```

---

### âœ… Káº¿t quáº£ khi cháº¡y

* `/` hiá»ƒn thá»‹ **Home Page**
* `/about` hiá»ƒn thá»‹ **About Page**
* Header/Footer **giá»¯ nguyÃªn** (khÃ´ng reload láº¡i)
* Navigation mÆ°á»£t mÃ  nhá» **App Router** vÃ  **hydration** tá»± Ä‘á»™ng.

---

### ğŸ§  Giáº£i thÃ­ch thÃªm vá» Hydration trong vÃ­ dá»¥ nÃ y:

* Khi load láº§n Ä‘áº§u, Next.js render layout + page **á»Ÿ server** (SSR).
* Sau Ä‘Ã³, JS client sáº½ **hydrate** láº¡i pháº§n React component tÆ°Æ¡ng á»©ng.
* Khi báº¡n click `<Link>`, Next.js chá»‰ **render pháº§n ná»™i dung thay Ä‘á»•i (children)** â†’ layout khÃ´ng unmount.

---
[<< BÃ€I 13](./13.md) | [BÃ€I 15 >>](./15.md)