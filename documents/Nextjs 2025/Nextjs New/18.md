**📘 Title Metadata (Tiêu đề động & Template Title)** — một phần **rất quan trọng trong SEO và UX**, giúp bạn **quản lý title động cho từng trang** trong Next.js App Router.

---

## 🎯 Mục tiêu

* Hiểu rõ cách Next.js quản lý **metadata.title**
* Biết cách dùng **title template** để tự động ghép tiêu đề
* Biết cách kết hợp **title động + layout metadata**
* Nắm cách override title ở từng cấp route

---

## 🧱 1️⃣ Ôn lại: metadata.title cơ bản

Trong App Router, bạn có thể khai báo trực tiếp trong `page.tsx` hoặc `layout.tsx`:

```tsx
export const metadata = {
  title: "Trang chủ | Next.js App",
  description: "Trang chủ của ứng dụng Next.js.",
};
```

➡ Tương ứng với:

```html
<title>Trang chủ | Next.js App</title>
<meta name="description" content="Trang chủ của ứng dụng Next.js.">
```

---

## ⚙️ 2️⃣ Dùng Template cho Title

Next.js cho phép bạn dùng **title template** để tạo cấu trúc tiêu đề nhất quán.

Ví dụ:
Khai báo trong `app/layout.tsx`

```tsx
export const metadata = {
  title: {
    default: "Next.js Learning Hub",
    template: "%s | Next.js Learning Hub",
  },
  description: "Khóa học App Router nâng cao.",
};
```

➡ Bất kỳ `page.tsx` nào có `metadata.title` riêng sẽ **tự động gắn template**.

Ví dụ:

```tsx
// app/about/page.tsx
export const metadata = {
  title: "Giới thiệu",
};
```

Khi render:

```
<title>Giới thiệu | Next.js Learning Hub</title>
```

---

## 🧩 3️⃣ Dùng default title

Khi một route **không có metadata.title riêng**, Next.js sẽ fallback về:

```tsx
title.default
```

👉 Ví dụ:
Nếu bạn chỉ định `default: "Next.js Learning Hub"` thì:

```
<title>Next.js Learning Hub</title>
```

---

## 🔁 4️⃣ Override metadata từ layout con

Khi bạn có **nested layout**, metadata sẽ **merge từ trên xuống**.
Nếu layout con có `title.template` riêng → nó sẽ **ghi đè template** của layout cha.

Ví dụ:

```
app/
├── layout.tsx        → title.template = "%s | Next.js App"
└── dashboard/
    ├── layout.tsx    → title.template = "%s | Admin Panel"
    └── page.tsx      → title = "Overview"
```

Kết quả khi vào `/dashboard`:

```
<title>Overview | Admin Panel</title>
```

---

## 🧠 5️⃣ Title động bằng generateMetadata

Khi bạn cần tạo **title theo dữ liệu**, dùng `generateMetadata()`.

```tsx
// app/blog/[slug]/page.tsx
type Props = { params: { slug: string } };

export async function generateMetadata({ params }: Props) {
  const post = await getPost(params.slug);
  return {
    title: `${post.title}`,
    description: post.excerpt,
  };
}
```

➡ Với `title.template` ở layout:

```
<title>Bài viết A | Next.js Blog</title>
```

---

## 💡 6️⃣ Mẹo chuyên nghiệp

| Trường hợp                             | Cách nên dùng                       |
| -------------------------------------- | ----------------------------------- |
| Ứng dụng lớn, nhiều layout             | Dùng `title.template` ở từng layout |
| Trang có dữ liệu động (blog, sản phẩm) | Dùng `generateMetadata()`           |
| App nhỏ, ít route                      | Khai báo trực tiếp `metadata.title` |

---

## 🧩 7️⃣ Ví dụ thực tế

### 📄 `app/layout.tsx`

```tsx
export const metadata = {
  title: {
    default: "Next Course",
    template: "%s | Next Course",
  },
  description: "Khóa học Next.js App Router toàn tập",
};
```

### 📄 `app/about/page.tsx`

```tsx
export const metadata = {
  title: "Về chúng tôi",
};

export default function AboutPage() {
  return <h1>Giới thiệu về Next Course</h1>;
}
```

### 📄 `app/blog/[slug]/page.tsx`

```tsx
export async function generateMetadata({ params }: { params: { slug: string } }) {
  return {
    title: `Bài viết: ${params.slug}`,
  };
}

export default function BlogPost({ params }: { params: { slug: string } }) {
  return <h1>Bài viết: {params.slug}</h1>;
}
```

➡ Kết quả:

* `/about` → **“Về chúng tôi | Next Course”**
* `/blog/next-15-update` → **“Bài viết: next-15-update | Next Course”**

---

## 💬 8️⃣ Bài tập

Tạo cấu trúc:

```
app/
├── layout.tsx
├── about/
│   └── page.tsx
└── blog/
    └── [slug]/
        └── page.tsx
```

Yêu cầu:

* Dùng `title.template` ở layout chính.
* Trang `about` có title tĩnh.
* Trang blog tạo title động theo `slug`.

Trong phần `metadata.title` của Next.js, ngoài `default` và `template`, còn có **`absolute`**, đây là một **tính năng đặc biệt** giúp **bỏ qua template** trong một số trường hợp.

---

## 🧱  `title.absolute` — tiêu đề tuyệt đối (không dính template)

### 🔍 Khi nào cần?

Nếu bạn **muốn trang nào đó có title riêng biệt**, **không bị chèn thêm template** từ layout cha.
Ví dụ:
Template chung là `"Next Course"`, nhưng bạn muốn trang “Landing Page” chỉ hiển thị `"Next.js Learning Hub"` (không có “| Next Course”).

---

## ⚙️ Cách dùng `absolute`

Bạn chỉ cần khai báo như sau trong metadata:

```tsx
export const metadata = {
  title: {
    absolute: "Next.js Learning Hub",
  },
};
```

Khi đó, Next.js sẽ **bỏ qua hoàn toàn `template` và `default`**, kết quả hiển thị:

```html
<title>Next.js Learning Hub</title>
```

---


## 🔬 So sánh tổng thể 3 loại title

### 1. **Default Title**

**Khai báo:**

```yaml
default: "Next Course"
```

**Kết quả:**
Khi trang không có title riêng, kết quả sẽ là **"Next Course"**.

---

### 2. **Template Title**

**Khai báo:**

```yaml
template: "%s | Next Course"
```

**Kết quả:**
Khi trang có title, kết quả sẽ là **"Trang A | Next Course"** (sử dụng tên trang thay thế `%s`).

---

### 3. **Absolute Title**

**Khai báo:**

```yaml
absolute: "Trang đặc biệt"
```

**Kết quả:**
Bỏ qua template và trả về **"Trang đặc biệt"**.



## 💡 Ứng dụng thực tế

Ví dụ trong `app/layout.tsx`:

```tsx
export const metadata = {
  title: {
    default: "Next Course",
    template: "%s | Next Course",
  },
};
```

Và ở `app/landing/page.tsx`:

```tsx
export const metadata = {
  title: {
    absolute: "Next.js Learning Hub",
  },
};

export default function LandingPage() {
  return <h1>Welcome to Next.js Learning Hub</h1>;
}
```

➡ Kết quả:

* `/landing` → `<title>Next.js Learning Hub</title>`
* `/about` → `<title>Về chúng tôi | Next Course</title>`

---

## 📌 Tổng kết ngắn

| Thuộc tính | Mục đích                                           | Kết hợp với template? |
| ---------- | -------------------------------------------------- | --------------------- |
| `default`  | Tiêu đề mặc định khi không có title riêng          | ❌                     |
| `template` | Mẫu để nối vào tiêu đề con (`%s`)                  | ✅                     |
| `absolute` | Ghi đè hoàn toàn template, dùng cho trang đặc biệt | ❌                     |



---
[<< BÀI 17](./17.md) | [BÀI 19 >>](./19.md)