 **PHáº¦N 8 Nested Dynamic Routes (Äá»‹nh tuyáº¿n Ä‘á»™ng lá»“ng nhau)** â€” pháº§n má»Ÿ rá»™ng cá»±c ká»³ há»¯u Ã­ch khi báº¡n xÃ¢y dá»±ng **cÃ¡c trang chi tiáº¿t Ä‘a cáº¥p**, nhÆ°:

* `/blog/[slug]/comments/[commentId]`
* `/shop/[category]/[productId]`
* `/users/[id]/posts/[postId]`

---

## ğŸ§­ Nested Dynamic Routes

### ğŸ¯ Má»¥c tiÃªu

* Hiá»ƒu cÃ¡ch **káº¿t há»£p nhiá»u cáº¥p route Ä‘á»™ng**
* Biáº¿t cÃ¡ch **truy cáº­p táº¥t cáº£ tham sá»‘ lá»“ng nhau**
* á»¨ng dá»¥ng Ä‘á»ƒ táº¡o layout dáº¡ng **â€œmaster-detailâ€**

---

## ğŸ“‚ 1ï¸âƒ£ Cáº¥u trÃºc thÆ° má»¥c vÃ­ dá»¥

```
app/
â””â”€â”€ blog/
    â””â”€â”€ [slug]/
        â”œâ”€â”€ page.tsx            â†’ /blog/[slug]
        â””â”€â”€ comments/
            â””â”€â”€ [commentId]/
                â””â”€â”€ page.tsx    â†’ /blog/[slug]/comments/[commentId]
```

---

## ğŸ“„ 2ï¸âƒ£ Code máº«u

### âœ… `app/blog/[slug]/comments/[commentId]/page.tsx`

```tsx
interface CommentDetailProps {
  params: {
    slug: string;
    commentId: string;
  };
}

export default function CommentDetailPage({ params }: CommentDetailProps) {
  return (
    <div style={{ padding: "1rem" }}>
      <h2>ğŸ’¬ BÃ¬nh luáº­n chi tiáº¿t</h2>
      <p>
        BÃ i viáº¿t: <strong>{params.slug}</strong>
      </p>
      <p>
        MÃ£ bÃ¬nh luáº­n: <strong>{params.commentId}</strong>
      </p>
    </div>
  );
}
```

Khi truy cáº­p `/blog/nextjs-app-router/comments/42`
â¡ Báº¡n sáº½ tháº¥y:

```
BÃ i viáº¿t: nextjs-app-router
MÃ£ bÃ¬nh luáº­n: 42
```

---

## ğŸ§  3ï¸âƒ£ Lá»“ng nhiá»u cáº¥p hÆ¡n ná»¯a

Báº¡n cÃ³ thá»ƒ Ä‘i xa hÆ¡n, vÃ­ dá»¥:

```
/project/[id]/tasks/[taskId]/subtasks/[subId]
```

vá»›i code tÆ°Æ¡ng tá»±, Next.js váº«n tá»± Ä‘á»™ng Ã¡nh xáº¡ `params` nhÆ°:

```tsx
{
  id: 'project1',
  taskId: 'task123',
  subId: 'sub456'
}
```

---

## ğŸ§© 4ï¸âƒ£ BÃ i táº­p nhá»

> Táº¡o cáº¥u trÃºc `/users/[id]/posts/[postId]`, hiá»ƒn thá»‹:
>
> ```
> User ID: ...
> Post ID: ...
> ```
>
> * Táº¡o thÃªm trang `/users/[id]/page.tsx` Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng tin ngÆ°á»i dÃ¹ng tá»•ng quÃ¡t.
> * Khi click 1 bÃ i viáº¿t trong danh sÃ¡ch, Ä‘iá»u hÆ°á»›ng Ä‘áº¿n `/users/[id]/posts/[postId]`.


Giá» ta sáº½ lÃ m vÃ­ dá»¥ **hoÃ n chá»‰nh** cho **Nested Dynamic Routes** vá»›i cáº¥u trÃºc:

```
/users/[id]/posts/[postId]
```

> Má»¥c tiÃªu: hiá»ƒn thá»‹ danh sÃ¡ch bÃ i viáº¿t cá»§a 1 user, vÃ  khi click vÃ o bÃ i viáº¿t â†’ Ä‘i Ä‘áº¿n trang chi tiáº¿t bÃ i viáº¿t (cÃ³ cáº£ 2 tham sá»‘ `id` vÃ  `postId`).

---

## ğŸ“ 1ï¸âƒ£ Cáº¥u trÃºc thÆ° má»¥c

```
app/
â””â”€â”€ users/
    â””â”€â”€ [id]/
        â”œâ”€â”€ page.tsx
        â””â”€â”€ posts/
            â””â”€â”€ [postId]/
                â””â”€â”€ page.tsx
```

---

## ğŸ“„ 2ï¸âƒ£ `app/users/[id]/page.tsx` â€“ Trang danh sÃ¡ch bÃ i viáº¿t cá»§a user

```tsx
import Link from "next/link";

interface UserPageProps {
  params: {
    id: string;
  };
}

export default function UserPage({ params }: UserPageProps) {
  const { id } = params;

  // Giáº£ láº­p danh sÃ¡ch bÃ i viáº¿t
  const posts = [
    { id: "p1", title: "Há»c Next.js App Router" },
    { id: "p2", title: "Hiá»ƒu vá» React Server Components" },
    { id: "p3", title: "Data Fetching trong Next.js" },
  ];

  return (
    <div style={{ padding: "1.5rem" }}>
      <h1>ğŸ‘¤ ThÃ´ng tin ngÆ°á»i dÃ¹ng: {id}</h1>
      <h2>ğŸ“ Danh sÃ¡ch bÃ i viáº¿t</h2>
      <ul>
        {posts.map((post) => (
          <li key={post.id}>
            <Link href={`/users/${id}/posts/${post.id}`}>
              <span style={{ color: "blue", textDecoration: "underline" }}>
                {post.title}
              </span>
            </Link>
          </li>
        ))}
      </ul>
    </div>
  );
}
```

---

## ğŸ“„ 3ï¸âƒ£ `app/users/[id]/posts/[postId]/page.tsx` â€“ Trang chi tiáº¿t bÃ i viáº¿t

```tsx
interface PostDetailPageProps {
  params: {
    id: string;
    postId: string;
  };
}

export default function PostDetailPage({ params }: PostDetailPageProps) {
  const { id, postId } = params;

  return (
    <div style={{ padding: "1.5rem" }}>
      <h1>ğŸ“„ Chi tiáº¿t bÃ i viáº¿t</h1>
      <p>
        ğŸ‘¤ User ID: <strong>{id}</strong>
      </p>
      <p>
        ğŸ§¾ Post ID: <strong>{postId}</strong>
      </p>
    </div>
  );
}
```

---

## âš™ï¸ 4ï¸âƒ£ CÃ¡ch hoáº¡t Ä‘á»™ng

1. Khi truy cáº­p `/users/123` â†’ hiá»ƒn thá»‹ danh sÃ¡ch bÃ i viáº¿t.
2. Khi click â€œHá»c Next.js App Routerâ€ â†’ Ä‘iá»u hÆ°á»›ng tá»›i `/users/123/posts/p1`.
3. `params` tá»± Ä‘á»™ng chá»©a cáº£ 2 tham sá»‘:

   ```ts
   { id: '123', postId: 'p1' }
   ```
4. KhÃ´ng cáº§n pháº£i Ä‘á»‹nh nghÄ©a thÃªm router, Next.js tá»± mapping theo folder.

---

## ğŸ’¡ 5ï¸âƒ£ Má»Ÿ rá»™ng

Báº¡n cÃ³ thá»ƒ dÃ¹ng layout lá»“ng nhau Ä‘á»ƒ:

* Chia sáº» UI chung giá»¯a `/users/[id]` vÃ  `/users/[id]/posts/[postId]`
* Giá»¯ thanh sidebar ngÆ°á»i dÃ¹ng cá»‘ Ä‘á»‹nh, chá»‰ thay pháº§n chi tiáº¿t bÃ i viáº¿t

VÃ­ dá»¥ thÃªm layout:

```
app/users/[id]/layout.tsx
```


---
[<< BÃ€I 07](./07.md) | [BÃ€I 09 >>](./09.md)