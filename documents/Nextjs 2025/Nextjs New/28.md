

## ğŸ§­ Conditional Routes trong Next.js

### ğŸ¯ Má»¥c tiÃªu

* Hiá»ƒu cÃ¡ch **hiá»ƒn thá»‹ hoáº·c áº©n route dá»±a trÃªn Ä‘iá»u kiá»‡n** (vÃ­ dá»¥: role, feature flag, tráº¡ng thÃ¡i login).
* KhÃ´ng cáº§n táº¡o nhiá»u file page riÃªng láº».
* Káº¿t há»£p **Server Components** hoáº·c **Client Components** Ä‘á»ƒ kiá»ƒm soÃ¡t Ä‘iá»u kiá»‡n.

---

## ğŸ§± 1ï¸âƒ£ VÃ­ dá»¥ cÆ¡ báº£n

Giáº£ sá»­ báº¡n cÃ³ dashboard, nhÆ°ng **chá»‰ ngÆ°á»i admin má»›i xem Ä‘Æ°á»£c `/admin`**:

```tsx
// app/dashboard/admin/page.tsx
import { getCurrentUser } from "@/lib/session";

export default async function AdminPage() {
  const user = await getCurrentUser();

  if (!user?.isAdmin) {
    return <p>Báº¡n khÃ´ng cÃ³ quyá»n truy cáº­p trang nÃ y.</p>;
  }

  return (
    <div>
      <h1>Admin Dashboard</h1>
      <p>Chá»‰ admin má»›i xem Ä‘Æ°á»£c ná»™i dung nÃ y.</p>
    </div>
  );
}
```

* **Server Component**: kiá»ƒm tra quyá»n trÆ°á»›c khi render.
* **Client Component** cÅ©ng cÃ³ thá»ƒ dÃ¹ng state Ä‘á»ƒ show/hide component.

---

## ğŸ§© 2ï¸âƒ£ Conditional navigation

Báº¡n cÃ³ thá»ƒ **áº©n link trong layout** náº¿u ngÆ°á»i dÃ¹ng khÃ´ng Ä‘á»§ quyá»n:

```tsx
// app/dashboard/layout.tsx
import { getCurrentUser } from "@/lib/session";

export default async function DashboardLayout({ children }: { children: React.ReactNode }) {
  const user = await getCurrentUser();

  return (
    <div>
      <nav>
        <a href="/dashboard">Overview</a>
        {user?.isAdmin && <a href="/dashboard/admin">Admin</a>}
      </nav>
      <main>{children}</main>
    </div>
  );
}
```

* Link **Admin** chá»‰ xuáº¥t hiá»‡n khi Ä‘iá»u kiá»‡n Ä‘Ãºng.

---

## ğŸ’¡ 3ï¸âƒ£ Lá»£i Ã­ch

* KhÃ´ng cáº§n táº¡o nhiá»u route trÃ¹ng láº·p.
* Dá»… káº¿t há»£p vá»›i **Role-Based Access Control (RBAC)**.
* TÄƒng tÃ­nh báº£o máº­t: route khÃ´ng há»£p lá»‡ sáº½ khÃ´ng render.


---
[<< BÃ€I 27](./27.md) | [BÃ€I 29 >>](./29.md)