 **Nested Layouts (Layout lồng nhau)** — một trong những cơ chế mạnh nhất của **Next.js App Router**, giúp **tái sử dụng giao diện và cấu trúc** cho từng nhóm trang mà không lặp code.

---

# 🎯 Mục tiêu bài học

Hiểu cách **layout cha và layout con** phối hợp với nhau trong App Router:

* Mỗi thư mục có thể có **layout riêng**
* Layout **được kế thừa theo cấu trúc thư mục**
* Cho phép tạo các vùng có **giao diện, navigation, sidebar, header khác nhau** trong cùng ứng dụng

---

## 🧭 Ví dụ thư mục

```
app/
├── layout.tsx          ← Root Layout (toàn site)
├── page.tsx            ← Home page
└── dashboard/
    ├── layout.tsx      ← Layout riêng cho Dashboard
    ├── page.tsx        ← Dashboard home
    └── settings/
        └── page.tsx    ← Trang con trong Dashboard
```

---

## 📄 `app/layout.tsx` – Root Layout (toàn site)

```tsx
import Link from "next/link";

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body className="font-sans bg-gray-50 text-gray-900">
        <header className="border-b p-4 bg-white shadow">
          <nav className="flex gap-4">
            <Link href="/">Home</Link>
            <Link href="/dashboard">Dashboard</Link>
          </nav>
        </header>
        <main className="p-6">{children}</main>
      </body>
    </html>
  );
}
```

---

## 📄 `app/page.tsx`

```tsx
export default function HomePage() {
  return (
    <div>
      <h1 className="text-2xl font-semibold">🏠 Home Page</h1>
      <p>This is the main homepage of our site.</p>
    </div>
  );
}
```

---

## 📄 `app/dashboard/layout.tsx` – Layout riêng cho Dashboard

```tsx
import Link from "next/link";

export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <section className="flex min-h-screen">
      {/* Sidebar */}
      <aside className="w-64 bg-gray-100 p-6 border-r">
        <h2 className="text-lg font-bold mb-4">📊 Dashboard</h2>
        <nav className="flex flex-col gap-2">
          <Link href="/dashboard">Overview</Link>
          <Link href="/dashboard/settings">Settings</Link>
        </nav>
      </aside>

      {/* Nội dung chính */}
      <div className="flex-1 p-8 bg-white">{children}</div>
    </section>
  );
}
```

---

## 📄 `app/dashboard/page.tsx`

```tsx
export default function DashboardHome() {
  return (
    <div>
      <h1 className="text-2xl font-semibold">📈 Dashboard Overview</h1>
      <p>Welcome to your dashboard overview section.</p>
    </div>
  );
}
```

---

## 📄 `app/dashboard/settings/page.tsx`

```tsx
export default function DashboardSettings() {
  return (
    <div>
      <h1 className="text-2xl font-semibold">⚙️ Settings</h1>
      <p>Here you can configure your dashboard preferences.</p>
    </div>
  );
}
```

---

## 🔍 Kết quả khi chạy

| URL                   | Layout nào được render         |
| --------------------- | ------------------------------ |
| `/`                   | Root Layout                    |
| `/dashboard`          | Root Layout → Dashboard Layout |
| `/dashboard/settings` | Root Layout → Dashboard Layout |

➡️ Khi bạn chuyển giữa `/dashboard` và `/dashboard/settings`, **Dashboard Layout không bị re-render**, chỉ thay đổi phần `children` bên trong.
Điều này giúp **hiệu năng cao** và **UI mượt mà hơn rất nhiều**.

---

## 💡 Ghi nhớ

* Mỗi `layout.tsx` là **bắt buộc phải có `{children}`** — nó là nơi trang con được hiển thị.
* Layout có thể **lồng nhiều cấp** — Next.js tự động **kết hợp** layout cha và con.
* Dùng layout riêng để tách biệt các khu vực logic (ví dụ: user vs admin).


---
[<< BÀI 14](./14.md) | [BÀI 16 >>](./16.md)