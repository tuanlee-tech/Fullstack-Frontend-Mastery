## 🧭 Dynamic Routes trong Next.js

### 🎯 Mục tiêu

* Hiểu cơ chế tạo route động bằng dấu **[param]**
* Biết cách **đọc giá trị động** thông qua `params`
* Áp dụng để tạo trang chi tiết như Blog Detail, Product Detail, Profile, v.v.

---

## 🧱 1️⃣ Cấu trúc thư mục của Dynamic Route

Trong App Router, **chỉ cần tạo thư mục có dấu ngoặc vuông `[ ]`** là đã định nghĩa một route động.

Ví dụ:

```
app/
└── blog/
    ├── page.tsx               → /blog
    └── [slug]/
        └── page.tsx           → /blog/:slug
```

Khi bạn truy cập `/blog/nextjs-app-router`, Next.js sẽ render file:

```
app/blog/[slug]/page.tsx
```

và tự động truyền `params.slug = "nextjs-app-router"`.

---

## 📄 2️⃣ Ví dụ thực tế

### 👉 `app/blog/[slug]/page.tsx`

```tsx
interface BlogDetailProps {
  params: { slug: string };
}

export default function BlogDetailPage({ params }: BlogDetailProps) {
  return (
    <div style={{ padding: "1rem" }}>
      <h2>📝 Blog Detail</h2>
      <p>
        Bạn đang xem bài viết có slug: <strong>{params.slug}</strong>
      </p>
    </div>
  );
}
```

Truy cập thử:

* `/blog/nextjs-app-router`
* `/blog/react-server-components`
* `/blog/dynamic-routing`

➡ Tất cả đều dùng **một component duy nhất**, chỉ khác giá trị `slug`.

---

## ⚙️ 3️⃣ Truy cập nhiều tham số động

Bạn có thể có nhiều cấp độ động, ví dụ:

```
app/
└── shop/
    └── [category]/
        └── [productId]/
            └── page.tsx
```

Khi vào `/shop/phones/123`, bạn nhận được:

```tsx
export default function ProductPage({ params }: { params: { category: string; productId: string } }) {
  return (
    <div>
      <h2>🛍️ Category: {params.category}</h2>
      <p>Product ID: {params.productId}</p>
    </div>
  );
}
```

---

## 🔍 4️⃣ So sánh với React Router

| React Router                  | Next.js App Router                    |
| ----------------------------- | ------------------------------------- |
| `/user/:id` trong file config | `[id]/page.tsx` trong thư mục         |
| Dùng `useParams()` hook       | Next.js truyền `params` sẵn qua props |
| Cần define routes thủ công    | File-system routing tự động           |

---

## 💡 5️⃣ Tips khi dùng Dynamic Routes

* `params` chỉ có trong **Server Component** (mặc định).
  Nếu bạn muốn đọc `params` trong **Client Component**, cần truyền từ cha xuống.
* Bạn có thể kết hợp **Dynamic + Static Rendering** bằng `generateStaticParams()` (sẽ học ở phần 6.6).
* Đặt tên `[id]`, `[slug]`, `[username]` tùy theo ý nghĩa dữ liệu.

---

## 🧩 Bài tập nhỏ

> Tạo cấu trúc `/users/[id]`, hiển thị thông tin người dùng dựa trên id URL.
> Gợi ý:
>
> * `/users/1` → Hiển thị “User ID: 1”
> * `/users/abc` → Hiển thị “User ID: abc”

---
[<< BÀI 06](./06.md) | [BÀI 08 >>](./08.md)