
## ğŸ§­ Unmatched Routes trong Next.js

### ğŸ¯ Má»¥c tiÃªu

* Hiá»ƒu cÃ¡ch Next.js xá»­ lÃ½ cÃ¡c route **khÃ´ng khá»›p vá»›i báº¥t ká»³ page nÃ o**.
* Táº¡o **404 pages** hoáº·c cÃ¡c fallback route.
* Quáº£n lÃ½ **redirect** cho cÃ¡c URL lá»—i hoáº·c khÃ´ng tá»“n táº¡i.

---

## ğŸ§± 1ï¸âƒ£ Catch-all dynamic route

* Táº¡o file **`[...slug]/page.tsx`** Ä‘á»ƒ báº¯t táº¥t cáº£ route khÃ´ng khá»›p.

```txt
app/
â”œâ”€â”€ not-found/
â”‚   â””â”€â”€ page.tsx
```

* Hoáº·c dÃ¹ng **`not-found.tsx`** trong app root hoáº·c thÆ° má»¥c con:

```tsx
// app/not-found.tsx
export default function NotFound() {
  return (
    <div style={{ padding: "2rem", textAlign: "center" }}>
      <h1>404 - Page Not Found</h1>
      <p>Xin lá»—i, trang báº¡n tÃ¬m khÃ´ng tá»“n táº¡i.</p>
      <a href="/">Quay vá» trang chá»§</a>
    </div>
  );
}
```

* Next.js tá»± Ä‘á»™ng render khi route khÃ´ng tá»“n táº¡i.

---

## ğŸ§© 2ï¸âƒ£ Redirect hoáº·c fallback

* Báº¡n cÅ©ng cÃ³ thá»ƒ redirect Ä‘áº¿n homepage hoáº·c route khÃ¡c náº¿u URL khÃ´ng há»£p lá»‡:

```tsx
import { redirect } from "next/navigation";

export default function NotFoundRedirect() {
  redirect("/");
}
```

* Sá»­ dá»¥ng **Server Components** hoáº·c **Server Actions** Ä‘á»ƒ xá»­ lÃ½ redirect theo Ä‘iá»u kiá»‡n.

---

## ğŸ’¡ 3ï¸âƒ£ Lá»£i Ã­ch

* Quáº£n lÃ½ **404 page** dá»… dÃ ng.
* Giá»¯ tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng mÆ°á»£t mÃ  khi URL sai.
* Káº¿t há»£p vá»›i **middleware** Ä‘á»ƒ xá»­ lÃ½ cÃ¡c route lá»—i global.



---



## ğŸ§© **1ï¸âƒ£ CÃ¡ch 1 â€“ DÃ¹ng `not-found.tsx`**

ÄÃ¢y lÃ  **cÃ¡ch chÃ­nh thá»©c vÃ  â€œNext.js wayâ€** Ä‘á»ƒ xá»­ lÃ½ 404.

### ğŸ“ Cáº¥u trÃºc vÃ­ dá»¥:

```
app/
 â”œâ”€ layout.tsx
 â”œâ”€ not-found.tsx        â† trang 404 chung toÃ n app
 â”œâ”€ blog/
 â”‚   â”œâ”€ page.tsx
 â”‚   â”œâ”€ [slug]/
 â”‚   â”‚   â”œâ”€ page.tsx
 â”‚   â”‚   â””â”€ not-found.tsx   â† trang 404 riÃªng cho /blog
```

### âš™ï¸ `app/blog/[slug]/page.tsx`

```tsx
import { notFound } from "next/navigation";

const validSlugs = ["nextjs", "react", "tailwind"];

export default function BlogPost({ params }: { params: { slug: string } }) {
  const { slug } = params;

  if (!validSlugs.includes(slug)) {
    notFound(); // ğŸš¨ Gá»i hÃ m nÃ y Ä‘á»ƒ trigger 404 page
  }

  return (
    <article className="p-6">
      <h1 className="text-2xl font-bold">BÃ i viáº¿t: {slug}</h1>
      <p>Ná»™i dung cá»§a bÃ i viáº¿t nÃ y...</p>
    </article>
  );
}
```

### ğŸ§± `app/blog/[slug]/not-found.tsx`

```tsx
export default function BlogNotFound() {
  return (
    <div className="p-10 text-center">
      <h1 className="text-3xl font-semibold text-red-600">BÃ i viáº¿t khÃ´ng tá»“n táº¡i</h1>
      <p className="text-gray-600 mt-2">Vui lÃ²ng kiá»ƒm tra láº¡i Ä‘Æ°á»ng dáº«n cá»§a báº¡n.</p>
    </div>
  );
}
```

> ğŸ‘‰ Khi `notFound()` Ä‘Æ°á»£c gá»i, Next.js tá»± Ä‘á»™ng render `not-found.tsx` trong cÃ¹ng segment (náº¿u cÃ³).
> Náº¿u **khÃ´ng cÃ³**, nÃ³ sáº½ fallback sang `app/not-found.tsx` (global).

---

## ğŸ§  **2ï¸âƒ£ CÃ¡ch 2 â€“ DÃ¹ng Catch-All Dynamic Route `[...slug]`**

Náº¿u báº¡n muá»‘n tá»± xá»­ lÃ½ logic cá»§a nhá»¯ng route khÃ´ng khá»›p,
báº¡n cÃ³ thá»ƒ táº¡o file:

```
app/[...slug]/page.tsx
```

### ğŸ“„ VÃ­ dá»¥:

```tsx
export default function CatchAllPage({ params }: { params: { slug?: string[] } }) {
  const path = params.slug?.join("/") || "";

  if (path.startsWith("admin")) {
    // CÃ³ thá»ƒ redirect
    return <p>Redirecting to admin dashboard...</p>;
  }

  return (
    <div className="flex flex-col items-center justify-center h-screen text-center">
      <h1 className="text-3xl font-bold text-red-500">404 - Trang khÃ´ng tá»“n táº¡i</h1>
      <p className="text-gray-600 mt-2">KhÃ´ng tÃ¬m tháº¥y ná»™i dung cho Ä‘Æ°á»ng dáº«n: <b>{path}</b></p>
    </div>
  );
}
```

> âœ… Æ¯u Ä‘iá»ƒm: tá»± do, cÃ³ thá»ƒ thÃªm logic kiá»ƒm tra & redirect.
> âŒ NhÆ°á»£c Ä‘iá»ƒm: pháº£i tá»± xá»­ lÃ½ 404, khÃ´ng dÃ¹ng Ä‘Æ°á»£c `notFound()` chuáº©n framework.

---

## âš¡ **3ï¸âƒ£ So sÃ¡nh nhanh**

| TiÃªu chÃ­        | `not-found.tsx`                               | `[...slug]` (Catch-all)                 |
| --------------- | --------------------------------------------- | --------------------------------------- |
| CÆ¡ cháº¿          | Dá»±a trÃªn hÃ m `notFound()` cá»§a Next.js         | Dá»±a trÃªn dynamic route thá»§ cÃ´ng         |
| Tá»± Ä‘á»™ng trigger | âœ… Khi gá»i `notFound()` hoáº·c route khÃ´ng match | âŒ KhÃ´ng, báº¡n pháº£i handle logic          |
| Dá»… báº£o trÃ¬      | âœ… Ráº¥t dá»…                                      | âš ï¸ CÃ³ thá»ƒ phá»©c táº¡p náº¿u cÃ³ nhiá»u pattern |
| DÃ¹ng cho        | 404 chuáº©n hoáº·c segment-specific               | TÃ¹y chá»‰nh redirect / logic phá»©c táº¡p     |
| Redirect        | DÃ¹ng `redirect()`                             | DÃ¹ng `redirect()` hoáº·c custom logic     |

---

## ğŸ§© **4ï¸âƒ£ Redirect khi route khÃ´ng há»£p lá»‡**

Báº¡n cÃ³ thá»ƒ káº¿t há»£p `notFound()` hoáº·c `redirect()`:

### VÃ­ dá»¥:

```tsx
import { notFound, redirect } from "next/navigation";

export default function BlogPost({ params }: { params: { slug: string } }) {
  if (params.slug === "secret") {
    redirect("/login"); // chuyá»ƒn hÆ°á»›ng
  }

  if (params.slug === "unknown") {
    notFound(); // hiá»ƒn thá»‹ trang 404
  }

  return <p>BÃ i viáº¿t: {params.slug}</p>;
}
```

---

## ğŸ§­ **5ï¸âƒ£ Pháº¡m vi cá»§a `not-found.tsx`**

| File `not-found.tsx` Ä‘áº·t á»Ÿ Ä‘Ã¢u   | Pháº¡m vi Ã¡p dá»¥ng               |
| -------------------------------- | ----------------------------- |
| `/app/not-found.tsx`             | ToÃ n app                      |
| `/app/blog/not-found.tsx`        | Chá»‰ Ã¡p dá»¥ng trong `/blog`     |
| `/app/blog/[slug]/not-found.tsx` | Chá»‰ cho route `/blog/[slug]`  |
| `/app/(auth)/not-found.tsx`      | Chá»‰ trong nhÃ³m route `(auth)` |

ğŸ‘‰ **Next.js tÃ¬m tá»« trong ra ngoÃ i** (nearest match).

---

## ğŸ¨ **6ï¸âƒ£ Gá»£i Ã½ UI Ä‘áº¹p cho 404**

```tsx
export default function NotFound() {
  return (
    <div className="flex flex-col items-center justify-center h-screen bg-gray-50">
      <h1 className="text-6xl font-bold text-red-500 mb-4">404</h1>
      <p className="text-gray-600 text-lg mb-6">Trang báº¡n tÃ¬m khÃ´ng tá»“n táº¡i ğŸ˜¢</p>
      <a
        href="/"
        className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
      >
        Quay láº¡i trang chá»§
      </a>
    </div>
  );
}
```

---

## âœ… **TÃ³m táº¯t**

| Má»¥c tiÃªu                  | CÃ¡ch dÃ¹ng                            |
| ------------------------- | ------------------------------------ |
| 404 page cÆ¡ báº£n           | Táº¡o file `not-found.tsx`             |
| 404 riÃªng tá»«ng module     | Äáº·t `not-found.tsx` trong thÆ° má»¥c Ä‘Ã³ |
| Redirect khi khÃ´ng há»£p lá»‡ | DÃ¹ng `redirect("/path")`             |
| Custom logic path         | DÃ¹ng `[...slug]`                     |
| Æ¯u tiÃªn render            | Segment gáº§n nháº¥t cÃ³ `not-found.tsx`  |


---
[<< BÃ€I 26](./26.md) | [BÃ€I 28 >>](./28.md)