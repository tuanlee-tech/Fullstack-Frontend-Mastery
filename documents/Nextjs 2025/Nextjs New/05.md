

# 🧭 **Routing cơ bản trong Next.js App Router**

## 🧱 1️⃣ Cấu trúc thư mục = Routing tự động

Trong App Router, **mỗi thư mục trong `/app` tương ứng với một route segment**.
Next.js sẽ tự động tạo đường dẫn dựa theo cấu trúc thư mục mà bạn tạo, **không cần dùng `react-router-dom` hay config thủ công**.

---

### 🧩 **Ví dụ:**

```
app/
├── page.tsx              →  /
├── about/
│   └── page.tsx          →  /about
└── contact/
    └── page.tsx          →  /contact
```

👉 Kết quả routing tự động:

| URL        | File tương ứng       |
| ---------- | -------------------- |
| `/`        | app/page.tsx         |
| `/about`   | app/about/page.tsx   |
| `/contact` | app/contact/page.tsx |

---

## 💡 2️⃣ Mỗi route cần **page.tsx**

File `page.tsx` là entry point cho một route.
Nếu folder không có `page.tsx`, nó **chỉ đóng vai trò layout hoặc nhóm route (route group)**.

```tsx
// app/about/page.tsx
export default function AboutPage() {
  return (
    <section>
      <h1>About Page</h1>
      <p>This is the about page of our Next.js app.</p>
    </section>
  );
}
```

---

## 🔁 3️⃣ **Chuyển trang (Navigation)**

Trong App Router, bạn dùng **`<Link>`** từ `next/link` để điều hướng mà **không reload trang**.

```tsx
// app/page.tsx
import Link from "next/link";

export default function HomePage() {
  return (
    <nav style={{ display: "flex", gap: "1rem" }}>
      <Link href="/about">About</Link>
      <Link href="/contact">Contact</Link>
    </nav>
  );
}
```

✅ **Cơ chế:**

* Next.js dùng **client-side navigation**, nên chuyển trang nhanh (SPA-like).
* Khi chuyển, layout cha **vẫn giữ nguyên**, chỉ thay phần nội dung của `page.tsx`.

---

## 📦 4️⃣ **Layout cha không bị reload**

Tiếp tục từ ví dụ trước, nếu bạn có `layout.tsx` ở root:

```tsx
// app/layout.tsx
export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <body>
        <header>Global Header</header>
        <main>{children}</main>
      </body>
    </html>
  );
}
```

➡ Khi bạn chuyển từ `/` → `/about`, layout **không render lại**, chỉ phần `<main>` thay đổi.

🧠 Điều này giúp:

* Tối ưu hiệu năng.
* Giữ lại state, layout, animation giữa các trang.

---

## ⚙️ 5️⃣ **usePathname() — lấy đường dẫn hiện tại**

Nếu bạn muốn biết người dùng đang ở route nào:

```tsx
// app/components/NavBar.tsx
"use client";

import Link from "next/link";
import { usePathname } from "next/navigation";

export default function NavBar() {
  const pathname = usePathname();

  return (
    <nav>
      <Link href="/" style={{ color: pathname === "/" ? "red" : "black" }}>Home</Link>
      <Link href="/about" style={{ color: pathname === "/about" ? "red" : "black" }}>About</Link>
    </nav>
  );
}
```

📍 Kết quả: route hiện tại sẽ được tô màu đỏ → dùng để highlight active link.

---

## 🧠 Tổng kết kiến thức phần này

| Khái niệm           | Ý nghĩa                  |
| ------------------- | ------------------------ |
| `page.tsx`          | Entry point của route    |
| `layout.tsx`        | Layout bao ngoài route   |
| Folder trong `app/` | Segment của URL          |
| `<Link href>`       | Chuyển trang client-side |
| `usePathname()`     | Lấy URL hiện tại         |

---

## 🧩 Bài tập nhỏ

> Tạo app có 3 trang: `/`, `/services`, `/contact`
>
> * Mỗi trang có header và navigation (trong layout).
> * Khi chuyển trang, header **giữ nguyên**.
> * Active link đổi màu đỏ.
Tốt 👌 Vậy dưới đây là **code mẫu hoàn chỉnh** cho bài tập **Routing cơ bản** — phần 2.1.
Mục tiêu:

* Tạo app có 3 trang `/`, `/services`, `/contact`.
* Có `layout.tsx` giữ nguyên header và navigation.
* Active link tô đỏ khi ở trang hiện tại.

---

# 🏗 **Cấu trúc thư mục**

```
app/
├── layout.tsx
├── page.tsx
├── services/
│   └── page.tsx
├── contact/
│   └── page.tsx
└── components/
    └── NavBar.tsx
```

---

# 📄 **app/layout.tsx**

```tsx
import "./globals.css";
import NavBar from "./components/NavBar";

export const metadata = {
  title: "Next.js Basic Routing",
  description: "Learn basic routing with App Router",
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body style={{ fontFamily: "sans-serif", margin: 0 }}>
        <header
          style={{
            background: "#f8f9fa",
            padding: "1rem",
            borderBottom: "1px solid #ddd",
          }}
        >
          <h1>🌸 My Next.js App</h1>
          <NavBar />
        </header>
        <main style={{ padding: "2rem" }}>{children}</main>
      </body>
    </html>
  );
}
```

---

# 📄 **app/components/NavBar.tsx**

```tsx
"use client";

import Link from "next/link";
import { usePathname } from "next/navigation";

const navItems = [
  { name: "Home", href: "/" },
  { name: "Services", href: "/services" },
  { name: "Contact", href: "/contact" },
];

export default function NavBar() {
  const pathname = usePathname();

  return (
    <nav style={{ display: "flex", gap: "1rem", marginTop: "1rem" }}>
      {navItems.map((item) => (
        <Link
          key={item.href}
          href={item.href}
          style={{
            color: pathname === item.href ? "crimson" : "#333",
            textDecoration: "none",
            fontWeight: pathname === item.href ? "bold" : "normal",
          }}
        >
          {item.name}
        </Link>
      ))}
    </nav>
  );
}
```

---

# 📄 **app/page.tsx**

```tsx
export default function HomePage() {
  return (
    <section>
      <h2>🏠 Home Page</h2>
      <p>Welcome to the homepage of your first Next.js App Router project!</p>
    </section>
  );
}
```

---

# 📄 **app/services/page.tsx**

```tsx
export default function ServicesPage() {
  return (
    <section>
      <h2>💼 Services Page</h2>
      <p>We offer high-quality web development and consulting services.</p>
    </section>
  );
}
```

---

# 📄 **app/contact/page.tsx**

```tsx
export default function ContactPage() {
  return (
    <section>
      <h2>📞 Contact Page</h2>
      <p>Get in touch via email: hello@example.com</p>
    </section>
  );
}
```

---

# ✅ **Kết quả khi chạy:**

* `/` → Trang chủ có header và menu.
* Chuyển sang `/services` hay `/contact` → layout giữ nguyên, chỉ nội dung thay đổi.
* Active link chuyển màu đỏ.

---
[<< BÀI 04](./04.md) | [BÀI 06 >>](./06.md)