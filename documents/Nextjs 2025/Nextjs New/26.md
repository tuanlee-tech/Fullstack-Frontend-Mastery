## 🧭 PHẦN 4 – Advanced Routing trong Next.js

### 🎯 Mục tiêu

* Hiểu các tính năng nâng cao của **App Router**:

  * **Parallel Routes**
  * **Unmatched Routes**
  * **Conditional Routes**
  * **Intercepting Routes**
  * **Parallel Intercepting Routes**
* Tăng khả năng tổ chức app lớn với nhiều route phức tạp.

---

## 4.1 – Parallel Routes

* Cho phép render **nhiều outlet song song** trong cùng một layout mà không phải nested route.
* Cấu trúc thư mục: sử dụng **`(group)`** để phân tách route mà không ảnh hưởng đến URL.

```txt
app/
├── dashboard/
│   ├── layout.tsx
│   ├── (overview)/page.tsx
│   └── (analytics)/page.tsx
```

* `/dashboard` có thể render **cả overview và analytics cùng lúc** trong layout.

---

## 4.2 – Unmatched Routes

* Cho phép bắt các route **không khớp với bất kỳ page nào**
* Dùng **`not-found.tsx`** hoặc **catch-all dynamic routes**
* Thường dùng cho **404 pages** hoặc redirect.

---

## 4.3 – Conditional Routes

* Render một route **dựa trên điều kiện runtime**, ví dụ:

  * User role
  * Feature flag
* Thường kết hợp với **Server Components + Auth**.

---

## 4.4 – Intercepting Routes

* Cho phép route **intercept navigation** mà không thay đổi URL.
* Ví dụ: modal, drawer, onboarding wizard.

```
app/
├── dashboard/
│   ├── page.tsx
│   └── (modal)/settings/page.tsx
```

* `/dashboard/(modal)/settings` có thể **hiện modal trên dashboard** mà URL vẫn là `/dashboard`.

---

## 4.5 – Parallel Intercepting Routes

* Kết hợp **Parallel + Intercepting** để tạo các layout complex:

  * Sidebar và content load song song
  * Modal overlay load song song

* Cấu trúc thư mục **sử dụng các route groups `(group)`** và intercepting route `(modal)`.

---


## 🧭 Parallel Routes trong Next.js

### 🎯 Mục tiêu

* Hiểu cách render **nhiều outlet song song** trong cùng một layout.
* Không cần nested route để render nhiều component khác nhau cùng lúc.
* Giúp quản lý **dashboard, sidebar, header, modal** đồng thời trong cùng một layout.

---

## 🧱 1️⃣ Cấu trúc thư mục

Sử dụng **route groups `(group)`** để tạo Parallel Routes:

```txt
app/
├── dashboard/
│   ├── layout.tsx
│   ├── page.tsx
│   ├── (overview)/page.tsx
│   └── (analytics)/page.tsx
```

* `(overview)` và `(analytics)` là **route group**, **không ảnh hưởng URL**.
* Layout `dashboard/layout.tsx` sẽ render song song cả 2 outlet.

---

## 🧩 2️⃣ Dashboard Layout ví dụ

```tsx
// app/dashboard/layout.tsx
export default function DashboardLayout({ children }: { children: React.ReactNode }) {
  return (
    <div style={{ display: "flex", gap: "1rem" }}>
      <aside style={{ flex: 1, borderRight: "1px solid #ddd", padding: "1rem" }}>
        <h3>Sidebar</h3>
        <ul>
          <li><a href="/dashboard">Overview</a></li>
          <li><a href="/dashboard/analytics">Analytics</a></li>
        </ul>
      </aside>
      <main style={{ flex: 3 }}>
        {children} {/* Đây là outlet song song */}
      </main>
    </div>
  );
}
```

* `children` sẽ nhận **nội dung từ tất cả route group đang active**.

---

## 📄 3️⃣ Pages song song

```tsx
// app/dashboard/(overview)/page.tsx
export default function OverviewPage() {
  return <div><h2>Overview</h2><p>Dashboard overview content</p></div>;
}

// app/dashboard/(analytics)/page.tsx
export default function AnalyticsPage() {
  return <div><h2>Analytics</h2><p>Analytics metrics content</p></div>;
}
```

* Nếu bạn render `/dashboard`, cả **Overview và Analytics** có thể xuất hiện cùng lúc trong layout.

---

## 💡 4️⃣ Lợi ích

* Không phải nested route phức tạp.
* Dễ mở rộng cho dashboard phức tạp, sidebar + header + content load song song.
* Giữ trạng thái layout khi chuyển giữa các route group.



---
[<< BÀI 25](./25.md) | [BÀI 27 >>](./27.md)