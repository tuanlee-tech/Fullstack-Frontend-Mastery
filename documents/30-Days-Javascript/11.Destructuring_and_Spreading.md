# Ngày 11

## Phân rã và Toán tử Spread (Destructuring and Spread)

**Phân rã (Destructuring)**: Cách giải nén mảng hoặc đối tượng để gán giá trị vào các biến riêng biệt.

### Phân rã mảng (Destructuring Arrays)

```js
const numbers = [1, 2, 3]
let [numOne, numTwo, numThree] = numbers
console.log(numOne, numTwo, numThree) // 1 2 3
```

```js
const names = ['Asabeneh', 'Brook', 'David', 'John']
let [firstPerson, secondPerson, thirdPerson, fourthPerson] = names
console.log(firstPerson, secondPerson, thirdPerson, fourthPerson) // Asabeneh Brook David John
```

Bỏ qua phần tử bằng dấu phẩy:

```js
const numbers = [1, 2, 3]
let [numOne, , numThree] = numbers
console.log(numOne, numThree) // 1 3
```

Gán giá trị mặc định:

```js
const names = [undefined, 'Brook', 'David']
let [firstPerson = 'Asabeneh', secondPerson, thirdPerson, fourthPerson = 'John'] = names
console.log(firstPerson, secondPerson, thirdPerson, fourthPerson) // Asabeneh Brook David John
```

Sử dụng toán tử spread (`...`) để lấy các phần tử còn lại:

```js
const nums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
let [num1, num2, num3, ...rest] = nums
console.log(num1, num2, num3) // 1 2 3
console.log(rest) // [4, 5, 6, 7, 8, 9, 10]
```

### Phân rã trong vòng lặp

```js
const countries = [['Finland', 'Helsinki'], ['Sweden', 'Stockholm'], ['Norway', 'Oslo']]
for (const [country, city] of countries) {
  console.log(country, city)
}
// Finland Helsinki
// Sweden Stockholm
// Norway Oslo
```

### Phân rã đối tượng (Destructuring Object)

Tên biến phải khớp với khóa của đối tượng:

```js
const rectangle = {
  width: 20,
  height: 10,
  area: 200
}
let { width, height, area, perimeter } = rectangle
console.log(width, height, area, perimeter) // 20 10 200 undefined
```

### Đổi tên khi phân rã

```js
let { width: w, height: h, area: a, perimeter: p } = rectangle
console.log(w, h, a, p) // 20 10 200 undefined
```

Gán giá trị mặc định:

```js
let { width, height, area, perimeter = 60 } = rectangle
console.log(width, height, area, perimeter) // 20 10 200 60
```

### Tham số đối tượng không dùng phân rã

```js
const rect = { width: 20, height: 10 }
const calculatePerimeter = rectangle => 2 * (rectangle.width + rectangle.height)
console.log(calculatePerimeter(rect)) // 60
```

### Tham số đối tượng dùng phân rã

```js
const calculatePerimeter = ({ width, height }) => 2 * (width + height)
console.log(calculatePerimeter(rect)) // 60
```

### Phân rã đối tượng trong vòng lặp

```js
const todoList = [
  { task: 'Prepare JS Test', time: '4/1/2020 8:30', completed: true },
  { task: 'Give JS Test', time: '4/1/2020 10:00', completed: false },
  { task: 'Assess Test Result', time: '4/1/2020 1:00', completed: false }
]
for (const { task, time, completed } of todoList) {
  console.log(task, time, completed)
}
// Prepare JS Test 4/1/2020 8:30 true
// Give JS Test 4/1/2020 10:00 false
// Assess Test Result 4/1/2020 1:00 false
```

### Toán tử Spread hoặc Rest

#### Lấy các phần tử còn lại của mảng

```js
const nums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
let [num1, num2, num3, ...rest] = nums
console.log(num1, num2, num3) // 1 2 3
console.log(rest) // [4, 5, 6, 7, 8, 9, 10]
```

#### Sao chép mảng

```js
const evens = [0, 2, 4, 6, 8, 10]
const evenNumbers = [...evens]
const odds = [1, 3, 5, 7, 9]
const wholeNumbers = [...evens, ...odds]
console.log(wholeNumbers) // [0, 2, 4, 6, 8, 10, 1, 3, 5, 7, 9]
```

#### Sao chép đối tượng

```js
const user = {
  name: 'Asabeneh',
  title: 'Programmer',
  country: 'Finland',
  city: 'Helsinki'
}
const copiedUser = { ...user, title: 'instructor' }
console.log(copiedUser) // {name: "Asabeneh", title: "instructor", country: "Finland", city: "Helsinki"}
```

#### Toán tử Spread trong hàm mũi tên

```js
const sumAllNums = (...args) => args.reduce((sum, num) => sum + num, 0)
console.log(sumAllNums(1, 2, 3, 4, 5)) // 15
```

---

## Bài tập: Ngày 11

### Bài tập: Cấp độ 1

```js
const constants = [2.72, 3.14, 9.81, 37, 100]
const countries = ['Finland', 'Estonia', 'Sweden', 'Denmark', 'Norway']
const rectangle = { width: 20, height: 10, area: 200, perimeter: 60 }
```

1. **Phân rã mảng constants**

```js
let [e, pi, gravity, humanBodyTemp, waterBoilingTemp] = constants
console.log(e, pi, gravity, humanBodyTemp, waterBoilingTemp) // 2.72 3.14 9.81 37 100
```

2. **Phân rã mảng countries**

```js
let [fin, est, sw, den, nor] = countries
console.log(fin, est, sw, den, nor) // Finland Estonia Sweden Denmark Norway
```

3. **Phân rã đối tượng rectangle**

```js
let { width, height, area, perimeter } = rectangle
console.log(width, height, area, perimeter) // 20 10 200 60
```

### Bài tập: Cấp độ 2

```js
const users = [
  { name: 'Brook', scores: 75, skills: ['HTM', 'CSS', 'JS'], age: 16 },
  { name: 'Alex', scores: 80, skills: ['HTM', 'CSS', 'JS'], age: 18 },
  { name: 'David', scores: 75, skills: ['HTM', 'CSS'], age: 22 },
  { name: 'John', scores: 85, skills: ['HTML'], age: 25 },
  { name: 'Sara', scores: 95, skills: ['HTM', 'CSS', 'JS'], age: 26 },
  { name: 'Martha', scores: 80, skills: ['HTM', 'CSS', 'JS'], age: 18 },
  { name: 'Thomas', scores: 90, skills: ['HTM', 'CSS', 'JS'], age: 20 }
]
```

1. **Lặp và lấy khóa của đối tượng**

```js
for (const { name, scores, skills, age } of users) {
  console.log(Object.keys({ name, scores, skills, age })) // ['name', 'scores', 'skills', 'age']
}
```

2. **Tìm người có dưới 2 kỹ năng**

```js
const lessThanTwoSkills = users.filter(({ skills }) => skills.length < 2)
console.log(lessThanTwoSkills) // [{ name: 'John', scores: 85, skills: ['HTML'], age: 25 }]
```

### Bài tập: Cấp độ 3

1. **Phân rã và in thông tin quốc gia**

```js
for (const { name, capital, population, languages } of countries) {
  console.log(name, capital, population, languages)
}
```

2. **Phân rã mảng student**

```js
const student = ['David', ['HTM', 'CSS', 'JS', 'React'], [98, 85, 90, 95]]
let [name, skills, [, , jsScore, reactScore]] = student
console.log(name, skills, jsScore, reactScore) // David ['HTM', 'CSS', 'JS', 'React'] 90 95
```

3. **Chuyển mảng thành đối tượng**

```js
function convertArrayToObject(students) {
  return students.map(([name, skills, scores]) => ({ name, skills, scores }))
}
const students = [
  ['David', ['HTM', 'CSS', 'JS', 'React'], [98, 85, 90, 95]],
  ['John', ['HTM', 'CSS', 'JS', 'React'], [85, 80, 85, 80]]
]
console.log(convertArrayToObject(students))
// [{ name: 'David', skills: ['HTM', 'CSS', 'JS', 'React'], scores: [98, 85, 90, 95] }, ...]
```

4. **Sao chép và thêm kỹ năng vào đối tượng**

```js
const student = {
  name: 'David',
  age: 25,
  skills: {
    frontEnd: [
      { skill: 'HTML', level: 10 },
      { skill: 'CSS', level: 8 },
      { skill: 'JS', level: 8 },
      { skill: 'React', level: 9 }
    ],
    backEnd: [
      { skill: 'Node', level: 7 },
      { skill: 'GraphQL', level: 8 }
    ],
    dataBase: [{ skill: 'MongoDB', level: 7.5 }],
    dataScience: ['Python', 'R', 'D3.js']
  }
}
const newStudent = {
  ...student,
  skills: {
    ...student.skills,
    frontEnd: [...student.skills.frontEnd, { skill: 'BootStrap', level: 8 }],
    backEnd: [...student.skills.backEnd, { skill: 'Express', level: 9 }],
    dataBase: [...student.skills.dataBase, { skill: 'SQL', level: 8 }],
    dataScience: [...student.skills.dataScience, 'SQL']
  }
}
console.log(newStudent)
```

---

[<< Ngày 10](./10.Sets_and_Maps.md) | [Ngày 12 >>](./12.Regular_Expressions.md)