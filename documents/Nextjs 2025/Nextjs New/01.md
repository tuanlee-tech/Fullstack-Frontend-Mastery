# ğŸ§­ PHáº¦N 1 â€” GIá»šI THIá»†U NEXT.JS

## 1ï¸âƒ£ Next.js lÃ  gÃ¬

Next.js lÃ  **má»™t framework dá»±a trÃªn React**, giÃºp báº¡n xÃ¢y dá»±ng **á»©ng dá»¥ng web hiá»‡n Ä‘áº¡i, nhanh, tá»‘i Æ°u SEO vÃ  dá»… má»Ÿ rá»™ng**.
KhÃ¡c vá»›i React thuáº§n chá»‰ cháº¡y phÃ­a **client (trÃ¬nh duyá»‡t)**, Next.js cho phÃ©p cháº¡y cáº£ á»Ÿ **server** vÃ  **client**, giÃºp:

* Hiá»ƒn thá»‹ ná»™i dung nhanh hÆ¡n (vÃ¬ render sáºµn HTML á»Ÿ server)
* Cáº£i thiá»‡n SEO (Google Ä‘á»c Ä‘Æ°á»£c ná»™i dung HTML)
* Dá»… phÃ¡t triá»ƒn cÃ¡c tÃ­nh nÄƒng phá»©c táº¡p nhÆ° login, routing, API, database,...

---

## 2ï¸âƒ£ Æ¯u Ä‘iá»ƒm ná»•i báº­t

| Æ¯u Ä‘iá»ƒm                                         | MÃ´ táº£                                                 |
| ----------------------------------------------- | ----------------------------------------------------- |
| âš¡ SSR/SSG                                       | TÄƒng tá»‘c hiá»ƒn thá»‹ vÃ  tá»‘i Æ°u SEO                       |
| ğŸ§­ Routing tá»± Ä‘á»™ng                              | KhÃ´ng cáº§n React Router, chá»‰ cáº§n táº¡o file trong `app/` |
| ğŸ§© API Routes                                   | Viáº¿t API ngay trong dá»± Ã¡n                             |
| ğŸ¨ Há»— trá»£ sáºµn TypeScript, Tailwind, CSS Modules |                                                       |
| â˜ï¸ Dá»… deploy lÃªn Vercel, Cloudflare, AWS,...    |                                                       |

---

## 3ï¸âƒ£ CÃ¡ch hoáº¡t Ä‘á»™ng (quy trÃ¬nh render trong Next.js)

HÃ£y xem luá»“ng cÆ¡ báº£n khi ngÆ°á»i dÃ¹ng truy cáº­p vÃ o má»™t trang Next.js:

```
TrÃ¬nh duyá»‡t gá»­i request â†’ Server render sáºµn HTML â†’ Tráº£ vá» cho trÃ¬nh duyá»‡t â†’ React hydrate â†’ Trang hoáº¡t Ä‘á»™ng nhÆ° app React
```

### ğŸ”¹ Giai Ä‘oáº¡n 1: Server render

Next.js cháº¡y code React **trÃªn server**, táº¡o ra **HTML tÄ©nh** Ä‘á»ƒ gá»­i xuá»‘ng client.
ğŸ‘‰ NgÆ°á»i dÃ¹ng tháº¥y ná»™i dung **ngay láº­p tá»©c** (tá»‘c Ä‘á»™ vÃ  SEO tá»‘t).

### ğŸ”¹ Giai Ä‘oáº¡n 2: Hydration

Sau khi HTML Ä‘Æ°á»£c hiá»ƒn thá»‹, React trÃªn client **táº£i láº¡i code JS** vÃ  **gáº¯n (attach)** logic React (state, event...) vÃ o HTML.
ğŸ‘‰ LÃºc nÃ y trang trá»Ÿ nÃªn **tÆ°Æ¡ng tÃ¡c** (click, input, update state,...)

---

## 4ï¸âƒ£ VÃ­ dá»¥ thá»±c táº¿: Hydration trong Next.js

### ğŸ§± Cáº¥u trÃºc thÆ° má»¥c

```
app/
 â”œâ”€ page.tsx
 â””â”€ components/
     â””â”€ Counter.tsx
```

---

### ğŸ”¹ **`components/Counter.tsx`**

```tsx
'use client';

import { useState } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);

  return (
    <button
      onClick={() => setCount(count + 1)}
      className="p-2 bg-blue-500 text-white rounded"
    >
      Click me ({count})
    </button>
  );
}
```

* `use client` giÃºp Next.js biáº¿t Ä‘Ã¢y lÃ  **Client Component**, Ä‘Æ°á»£c render vÃ  hydrate á»Ÿ phÃ­a client.
* Khi server gá»­i HTML xuá»‘ng, nÃ³ chá»‰ chá»©a `<button>Click me (0)</button>`, **chÆ°a cÃ³ JavaScript**.
* Sau khi JS táº£i, React **hydrate** â†’ nÃºt hoáº¡t Ä‘á»™ng, tÄƒng sá»‘ khi click.

---

### ğŸ”¹ **`app/page.tsx`**

```tsx
import Counter from './components/Counter';

export default function Page() {
  return (
    <main className="flex flex-col items-center justify-center h-screen">
      <h1 className="text-3xl font-bold mb-4">Hydration Demo</h1>
      <Counter />
    </main>
  );
}
```

---

### ğŸ“œ **Khi cháº¡y á»©ng dá»¥ng:**

1. Server render ra HTML:

   ```html
   <h1>Hydration Demo</h1>
   <button>Click me (0)</button>
   ```

   â†’ ngÆ°á»i dÃ¹ng **tháº¥y ná»™i dung ngay láº­p tá»©c**.
2. Sau khi React JS táº£i, quÃ¡ trÃ¬nh **hydrate** xáº£y ra:

   * Gáº¯n láº¡i event `onClick`
   * Theo dÃµi state `count`
   * Biáº¿n nÃºt Ä‘Ã³ thÃ nh React component tháº­t sá»±
     â†’ BÃ¢y giá» báº¡n click Ä‘Æ°á»£c, sá»‘ Ä‘áº¿m tÄƒng lÃªn.

---

## 5ï¸âƒ£ HÃ¬nh dung cÆ¡ cháº¿ tá»•ng thá»ƒ

| Giai Ä‘oáº¡n     | TrÃªn server       | TrÃªn client                 |
| ------------- | ----------------- | --------------------------- |
| Render        | Táº¡o HTML tá»« React | Nháº­n HTML vÃ  hiá»ƒn thá»‹ ngay  |
| Hydration     | â€”                 | Gáº¯n JS logic vÃ o HTML       |
| Sau Hydration | â€”                 | App hoáº¡t Ä‘á»™ng nhÆ° React SPA |

---

## 6ï¸âƒ£ Cáº©n trá»ng khi Hydration

* Náº¿u HTML server khÃ¡c HTML client â†’ lá»—i **Hydration Mismatch**.
* KhÃ´ng nÃªn truy cáº­p `window`, `document` trong Server Component.
* Chá»‰ dÃ¹ng `use client` khi cáº§n logic tÆ°Æ¡ng tÃ¡c (form, button, event).

---

## ğŸ’¡ TÃ³m táº¯t

> Next.js = React + Server-side Rendering + File-based Routing + API + Performance.
> Hydration = quÃ¡ trÃ¬nh â€œthá»•i há»“nâ€ cho HTML tÄ©nh, biáº¿n nÃ³ thÃ nh á»©ng dá»¥ng React tÆ°Æ¡ng tÃ¡c.

---


# âš›ï¸ Hiá»ƒu rÃµ vá» **Hydration trong Next.js (App Router)**



## ğŸ§­ 1. Next.js hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?

Next.js lÃ  framework káº¿t há»£p giá»¯a **Server Rendering (SSR)** vÃ  **Client Rendering (CSR)**.
Äiá»u Ä‘áº·c biá»‡t lÃ  nÃ³ **render trÆ°á»›c HTML á»Ÿ server**, sau Ä‘Ã³ **hydrate (kÃ­ch hoáº¡t React trÃªn client)** Ä‘á»ƒ HTML Ä‘Ã³ trá»Ÿ nÃªn tÆ°Æ¡ng tÃ¡c Ä‘Æ°á»£c.

---

## ğŸ’§ 2. Hydration lÃ  gÃ¬?

> **Hydration** lÃ  quÃ¡ trÃ¬nh **React trÃªn trÃ¬nh duyá»‡t (client)** â€œgáº¯nâ€ láº¡i cÃ¡c event handlers, state, hooks...
> lÃªn **HTML tÄ©nh Ä‘Æ°á»£c render tá»« server**.

Hiá»ƒu Ä‘Æ¡n giáº£n:

* SSR â†’ render HTML (chÆ°a cÃ³ JavaScript logic).
* Hydration â†’ â€œbÆ¡mâ€ React logic vÃ o HTML Ä‘Ã³ â†’ trang trá»Ÿ nÃªn tÆ°Æ¡ng tÃ¡c Ä‘Æ°á»£c.

---

## ğŸ§± 3. VÃ­ dá»¥ thá»±c táº¿

### ğŸ“ Cáº¥u trÃºc

```
app/
 â”œâ”€ page.tsx
 â””â”€ components/
     â”œâ”€ ServerInfo.tsx
     â””â”€ Counter.tsx
```

---

### **A. `ServerInfo.tsx` (máº·c Ä‘á»‹nh lÃ  Server Component)**

```tsx
export default async function ServerInfo() {
  const time = new Date().toISOString();

  return (
    <div className="p-4 bg-green-100 rounded">
      <h2 className="text-xl font-semibold">ğŸ§© Server Component</h2>
      <p>Rendered at: {time}</p>
      <p>(HTML Ä‘Æ°á»£c táº¡o á»Ÿ server vÃ  gá»­i xuá»‘ng client)</p>
    </div>
  );
}
```

ğŸ§  **Giáº£i thÃ­ch:**

* KhÃ´ng cÃ³ dÃ²ng `use client` á»Ÿ Ä‘áº§u file â†’ **máº·c Ä‘á»‹nh lÃ  Server Component**.
* Cháº¡y **chá»‰ á»Ÿ server** â†’ khÃ´ng thá»ƒ dÃ¹ng `useState`, `useEffect`, `onClick`, v.v.
* Táº¡o HTML tÄ©nh vÃ  gá»­i vá» client, **khÃ´ng cáº§n JavaScript kÃ¨m theo** â†’ táº£i ráº¥t nhanh.

---

### **B. `Counter.tsx` (Client Component)**

```tsx
'use client';

import { useState } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);

  return (
    <div className="p-4 bg-blue-100 rounded mt-4">
      <h2 className="text-xl font-semibold">âš™ï¸ Client Component</h2>
      <button
        onClick={() => setCount(count + 1)}
        className="px-4 py-2 bg-blue-500 text-white rounded"
      >
        Click me ({count})
      </button>
      <p>(Hydration giÃºp nÃºt nÃ y hoáº¡t Ä‘á»™ng trÃªn client)</p>
    </div>
  );
}
```

ğŸ§  **Giáº£i thÃ­ch:**

* CÃ³ `use client` â†’ Ä‘Æ°á»£c Next.js build thÃ nh **Client Component**.
* Component nÃ y Ä‘Æ°á»£c **hydrate trÃªn trÃ¬nh duyá»‡t**, vÃ¬ nÃ³ cÃ³:

  * State (`useState`)
  * Event (`onClick`)

---

### **C. `page.tsx` (káº¿t há»£p cáº£ hai)**

```tsx
import ServerInfo from './components/ServerInfo';
import Counter from './components/Counter';

export default function Page() {
  return (
    <main className="flex flex-col items-center justify-center min-h-screen p-6 space-y-6">
      <h1 className="text-3xl font-bold">ğŸš€ Next.js Hydration Demo</h1>
      <ServerInfo />
      <Counter />
    </main>
  );
}
```

---

## ğŸ” 4. Äiá»u gÃ¬ xáº£y ra khi báº¡n truy cáº­p trang?

### ğŸ§© Giai Ä‘oáº¡n 1 â€“ **Server Render**

Server cháº¡y `ServerInfo` â†’ render sáºµn HTML nhÆ°:

```html
<div>
  <h2>ğŸ§© Server Component</h2>
  <p>Rendered at: 2025-10-05T07:45:12.345Z</p>
</div>
```

â†’ HTML nÃ y Ä‘Æ°á»£c **gá»­i tháº³ng vá» trÃ¬nh duyá»‡t** vÃ  **hiá»ƒn thá»‹ ngay láº­p tá»©c** âš¡
Trang **Ä‘Ã£ cÃ³ ná»™i dung**, nhÆ°ng **chÆ°a cÃ³ logic React**.

---

### âš™ï¸ Giai Ä‘oáº¡n 2 â€“ **Hydration**

Sau khi HTML táº£i xong, trÃ¬nh duyá»‡t báº¯t Ä‘áº§u:

* Táº£i file JS cá»§a `Counter.tsx`
* DÃ¹ng React Ä‘á»ƒ â€œgáº¯n láº¡iâ€ event `onClick`, state, v.v.

â†’ NÃºt â€œClick me (0)â€ bÃ¢y giá» hoáº¡t Ä‘á»™ng â†’ **trang Ä‘Ã£ hydrate thÃ nh cÃ´ng** ğŸ‰

---

## ğŸ“š 5. TÃ³m táº¯t cÆ¡ cháº¿

| Loáº¡i Component     | Cháº¡y á»Ÿ Ä‘Ã¢u | CÃ³ thá»ƒ dÃ¹ng hook/state? | CÃ³ hydrate khÃ´ng? | Má»¥c Ä‘Ã­ch                        |
| ------------------ | ---------- | ----------------------- | ----------------- | ------------------------------- |
| `Server Component` | Server     | âŒ KhÃ´ng                 | âŒ KhÃ´ng           | Render HTML tÄ©nh, tá»‘i Æ°u tá»‘c Ä‘á»™ |
| `Client Component` | Client     | âœ… CÃ³                    | âœ… CÃ³              | Táº¡o tÆ°Æ¡ng tÃ¡c, sá»± kiá»‡n, state   |

---

## ğŸ§  6. LÆ°u Ã½ tá»‘i Æ°u

* **Máº·c Ä‘á»‹nh táº¥t cáº£ lÃ  Server Component** â†’ hiá»‡u nÄƒng tá»‘t hÆ¡n.
* Chá»‰ thÃªm `use client` khi cáº§n:

  * CÃ³ state hoáº·c event
  * DÃ¹ng hook (`useState`, `useEffect`, `useRef`, â€¦)
* Giáº£m sá»‘ lÆ°á»£ng Client Component â†’ giáº£m JS bundle & thá»i gian hydrate.

---

## âœ… 7. Káº¿t luáº­n

Hydration chÃ­nh lÃ  **cáº§u ná»‘i giá»¯a SSR (server render)** vÃ  **CSR (client interactivity)**.
NÃ³ giÃºp Next.js:

* Hiá»ƒn thá»‹ ná»™i dung **siÃªu nhanh** (SSR)
* NhÆ°ng váº«n cÃ³ thá»ƒ **tÆ°Æ¡ng tÃ¡c nhÆ° React app bÃ¬nh thÆ°á»ng** (CSR)


---
[<< README](./README.md) | [BÃ€I 02 >>](./02.md)