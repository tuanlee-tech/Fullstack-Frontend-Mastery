 **ğŸ“˜ Active Links (LiÃªn káº¿t Ä‘ang hoáº¡t Ä‘á»™ng)** â€” má»™t pháº§n nhá» nhÆ°ng **ráº¥t hay vÃ  cá»±c quan trá»ng** khi báº¡n lÃ m **navigation hoáº·c sidebar** trong App Router.

---

## ğŸ§­ Má»¥c tiÃªu

* Biáº¿t cÃ¡ch xÃ¡c Ä‘á»‹nh route hiá»‡n táº¡i trong App Router.
* Táº¡o **link cÃ³ tráº¡ng thÃ¡i active** (Ä‘ang Ä‘Æ°á»£c chá»n).
* LÃ m menu navigation chuyÃªn nghiá»‡p (sidebar, header).

---

## ğŸ§± 1ï¸âƒ£ Váº¥n Ä‘á» thÆ°á»ng gáº·p

Khi báº¡n táº¡o menu báº±ng `<Link>`:

```tsx
import Link from "next/link";

export default function Navbar() {
  return (
    <nav className="flex gap-4 p-4 bg-gray-100">
      <Link href="/">Home</Link>
      <Link href="/about">About</Link>
      <Link href="/blog">Blog</Link>
    </nav>
  );
}
```

Má»i link hiá»ƒn thá»‹ giá»‘ng nhau âŒ
Báº¡n khÃ´ng biáº¿t **link nÃ o Ä‘ang Ä‘Æ°á»£c active** (vÃ­ dá»¥ `/about` Ä‘ang Ä‘Æ°á»£c má»Ÿ).

---

## ğŸ§© 2ï¸âƒ£ Giáº£i phÃ¡p: dÃ¹ng `usePathname()`

Next.js cung cáº¥p hook:

```tsx
import { usePathname } from "next/navigation";
```

Hook nÃ y **cháº¡y á»Ÿ Client Component** â†’ giÃºp báº¡n biáº¿t Ä‘Æ°á»ng dáº«n hiá»‡n táº¡i.

---

### âš™ï¸ Cáº¥u trÃºc code:

```tsx
"use client";

import Link from "next/link";
import { usePathname } from "next/navigation";

export default function Navbar() {
  const pathname = usePathname();

  const links = [
    { href: "/", label: "ğŸ  Home" },
    { href: "/about", label: "â„¹ï¸ About" },
    { href: "/blog", label: "ğŸ“° Blog" },
  ];

  return (
    <nav className="flex gap-4 p-4 bg-gray-100">
      {links.map(({ href, label }) => {
        const isActive = pathname === href;
        return (
          <Link
            key={href}
            href={href}
            className={`px-3 py-1 rounded ${
              isActive ? "bg-blue-600 text-white" : "text-gray-700"
            }`}
          >
            {label}
          </Link>
        );
      })}
    </nav>
  );
}
```

â¡ Khi báº¡n Ä‘ang á»Ÿ `/about`, link â€œAboutâ€ sáº½ cÃ³ ná»n xanh â€“ thá»ƒ hiá»‡n **active state**.

---

## ğŸ§  3ï¸âƒ£ So sÃ¡nh `usePathname()` vs `useSelectedLayoutSegment()`

| Hook                         | DÃ¹ng khi nÃ o                                                  | Tráº£ vá»        | Ghi chÃº                     |
| ---------------------------- | ------------------------------------------------------------- | ------------- | --------------------------- |
| `usePathname()`              | Khi báº¡n cáº§n biáº¿t **Ä‘Æ°á»ng dáº«n Ä‘áº§y Ä‘á»§** (`/dashboard/settings`) | string        | Dá»… hiá»ƒu, phá»• biáº¿n           |
| `useSelectedLayoutSegment()` | Khi báº¡n muá»‘n **biáº¿t segment hiá»‡n táº¡i** (vÃ­ dá»¥ `"settings"`)   | string | null | Há»¯u Ã­ch trong nested layout |

VÃ­ dá»¥ `useSelectedLayoutSegment()` trong `/dashboard/[tab]/page.tsx`:

```tsx
"use client";
import { useSelectedLayoutSegment } from "next/navigation";

export default function DashboardNav() {
  const segment = useSelectedLayoutSegment();

  return (
    <nav className="flex gap-4 border-b p-2">
      <a href="/dashboard" className={segment === null ? "font-bold" : ""}>
        Overview
      </a>
      <a
        href="/dashboard/analytics"
        className={segment === "analytics" ? "font-bold" : ""}
      >
        Analytics
      </a>
      <a
        href="/dashboard/settings"
        className={segment === "settings" ? "font-bold" : ""}
      >
        Settings
      </a>
    </nav>
  );
}
```

---

## ğŸ§© 4ï¸âƒ£ BÃ i táº­p nhá»

Táº¡o file `app/_components/Navbar.tsx`

* DÃ¹ng `usePathname()`
* Hiá»ƒn thá»‹ 3 link: Home, About, Blog
* Khi click, link active Ä‘á»•i mÃ u.
* Import vÃ o `app/layout.tsx` Ä‘á»ƒ Navbar xuáº¥t hiá»‡n á»Ÿ má»i trang.

---

## âœ… Tá»•ng káº¿t nhanh

| TÃ­nh nÄƒng                         | Má»¥c Ä‘Ã­ch                     | Hook                         |
| --------------------------------- | ---------------------------- | ---------------------------- |
| Hiá»ƒn thá»‹ link Ä‘ang chá»n           | ÄÃ¡nh dáº¥u route hiá»‡n táº¡i      | `usePathname()`              |
| XÃ¡c Ä‘á»‹nh segment trong layout con | Highlight tab hoáº·c route con | `useSelectedLayoutSegment()` |

---
DÆ°á»›i Ä‘Ã¢y lÃ  **code máº«u hoÃ n chá»‰nh, production-ready** cho **Navbar cÃ³ Active Link** trong **Next.js App Router**, kÃ¨m **TailwindCSS** â€” sáºµn sÃ ng chÃ¨n vÃ o `app/layout.tsx`.

---

## ğŸ“ Cáº¥u trÃºc

```
app/
â”œâ”€â”€ layout.tsx
â””â”€â”€ _components/
    â””â”€â”€ Navbar.tsx
```

---

### ğŸ§© `app/_components/Navbar.tsx`

```tsx
"use client";

import Link from "next/link";
import { usePathname } from "next/navigation";

export default function Navbar() {
  const pathname = usePathname();

  const links = [
    { href: "/", label: "ğŸ  Home" },
    { href: "/about", label: "â„¹ï¸ About" },
    { href: "/blog", label: "ğŸ“° Blog" },
  ];

  return (
    <header className="border-b bg-white sticky top-0 z-50">
      <nav className="max-w-5xl mx-auto flex items-center justify-between p-4">
        <h1 className="text-xl font-semibold text-gray-800">
          Next<span className="text-blue-600">Learn</span>
        </h1>
        <ul className="flex gap-4">
          {links.map(({ href, label }) => {
            const isActive = pathname === href;
            return (
              <li key={href}>
                <Link
                  href={href}
                  className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${
                    isActive
                      ? "bg-blue-600 text-white shadow"
                      : "text-gray-700 hover:bg-gray-100"
                  }`}
                >
                  {label}
                </Link>
              </li>
            );
          })}
        </ul>
      </nav>
    </header>
  );
}
```

---

### ğŸ§± `app/layout.tsx`

```tsx
import "./globals.css";
import Navbar from "./_components/Navbar";

export const metadata = {
  title: "Next.js App Router Demo",
  description: "Active Link Demo",
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body className="min-h-screen bg-gray-50">
        <Navbar />
        <main className="max-w-5xl mx-auto p-6">{children}</main>
      </body>
    </html>
  );
}
```

---

### ğŸ’… Káº¿t quáº£:

* Navbar cá»‘ Ä‘á»‹nh trÃªn Ä‘áº§u (sticky).
* Link nÃ o Ä‘ang á»Ÿ route hiá»‡n táº¡i â†’ ná»n xanh, chá»¯ tráº¯ng.
* Hover nháº¹ mÃ u xÃ¡m.
* Dá»… tÃ¡i sá»­ dá»¥ng trong má»i dá»± Ã¡n Next.js.

---

ğŸ§  **Máº¹o nÃ¢ng cao:**
Náº¿u báº¡n muá»‘n active cáº£ **sub-path** (vÃ­ dá»¥ `/blog/post-1` váº«n highlight `/blog`), thay vÃ¬ `pathname === href`, hÃ£y viáº¿t:

```tsx
const isActive = pathname.startsWith(href);
```


---
[<< BÃ€I 19](./19.md) | [BÃ€I 21 >>](./21.md)