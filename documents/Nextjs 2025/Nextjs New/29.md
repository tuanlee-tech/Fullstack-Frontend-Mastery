

## 🧭 Intercepting Routes trong Next.js

### 🎯 Mục tiêu

* Hiểu cách Next.js cho phép **route này chèn vào route khác mà không thay đổi URL gốc**.
* Tạo các **modal, sidebar hoặc drawer** mà vẫn giữ route parent.
* Giúp **tái sử dụng layout** mà không cần duplicate pages.

---

## 🧱 1️⃣ Cơ chế Intercepting Routes

* Intercepting route thường dùng **`(group)`** và **`@modal` hoặc `@overlay`** để route phụ hiển thị trong route cha.
* Cú pháp:

```txt
app/
├── dashboard/
│   ├── page.tsx
│   ├── (modals)/
│   │   └── new-user/
│   │       └── page.tsx
```

* Khi bạn truy cập `/dashboard/(modals)/new-user`, Next.js sẽ **render modal trên layout dashboard** mà URL vẫn gọn gàng.

---

## 🧩 2️⃣ Ví dụ tạo Modal

```tsx
// app/dashboard/(modals)/new-user/page.tsx
"use client";
import { useRouter } from "next/navigation";

export default function NewUserModal() {
  const router = useRouter();

  return (
    <div
      style={{
        position: "fixed",
        top: 0,
        left: 0,
        right: 0,
        bottom: 0,
        background: "rgba(0,0,0,0.5)",
        display: "flex",
        justifyContent: "center",
        alignItems: "center",
      }}
    >
      <div style={{ background: "#fff", padding: "2rem", borderRadius: 8 }}>
        <h2>Thêm User Mới</h2>
        <button onClick={() => router.back()}>Đóng</button>
      </div>
    </div>
  );
}
```

* Layout cha (`dashboard/layout.tsx`) vẫn giữ nguyên, modal chỉ overlay lên.

---

## 💡 3️⃣ Lợi ích

* **Không reload layout** khi mở modal hoặc sidebar.
* URL rõ ràng, dễ quản lý state của modal.
* Kết hợp với **Parallel Routes** để render nhiều layer UI đồng thời.


---
[<< BÀI 28](./28.md) | [BÀI 30 >>](./30.md)