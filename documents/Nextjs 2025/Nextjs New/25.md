## ğŸ§­ Error Handling trong Next.js

### ğŸ¯ Má»¥c tiÃªu

* Hiá»ƒu cÃ¡ch Next.js **quáº£n lÃ½ lá»—i trong App Router**.
* Biáº¿t cÃ¡ch táº¡o **error boundaries** cho tá»«ng route, layout hoáº·c toÃ n app.
* Cáº£i thiá»‡n tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng khi xáº£y ra lá»—i.

---

## ğŸ§± 1ï¸âƒ£ CÆ¡ cháº¿ cÆ¡ báº£n

* Trong App Router, báº¡n cÃ³ thá»ƒ táº¡o **file `error.tsx`** trong **báº¥t ká»³ thÆ° má»¥c route nÃ o**.
* Khi route con hoáº·c layout Ä‘Ã³ gáº·p lá»—i, **Next.js tá»± Ä‘á»™ng render `error.tsx`** thay vÃ¬ crash toÃ n bá»™ app.

```
app/
â”œâ”€â”€ dashboard/
â”‚   â”œâ”€â”€ error.tsx
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ page.tsx
```

* `/dashboard/error.tsx` sáº½ Ä‘Æ°á»£c render náº¿u `page.tsx` hoáº·c component con trong dashboard throw error.

---

## ğŸ§© 2ï¸âƒ£ VÃ­ dá»¥ Error Component

```tsx
// app/dashboard/error.tsx
"use client";

import { useEffect } from "react";

interface ErrorProps {
  error: Error;
  reset: () => void;
}

export default function DashboardError({ error, reset }: ErrorProps) {
  useEffect(() => {
    console.error("Dashboard error:", error);
  }, [error]);

  return (
    <div style={{ padding: "2rem", color: "red" }}>
      <h2>Something went wrong in Dashboard!</h2>
      <p>{error.message}</p>
      <button onClick={() => reset()}>Try Again</button>
    </div>
  );
}
```

* `reset()` sáº½ **reset error boundary** vÃ  thá»­ render láº¡i page/layout.
* Chá»‰ **component lá»—i + layout lá»—i** bá»‹ thay tháº¿, khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n cÃ¡c layout khÃ¡c.

---

## ğŸ§± 3ï¸âƒ£ Nested Error Handling

```
app/
â”œâ”€â”€ dashboard/
â”‚   â”œâ”€â”€ error.tsx
â”‚   â””â”€â”€ analytics/
â”‚       â””â”€â”€ error.tsx
```

* Lá»—i trong `/dashboard/analytics` sáº½ render **analytics/error.tsx**, náº¿u khÃ´ng cÃ³ â†’ fallback lÃªn **dashboard/error.tsx**.
* Lá»—i toÃ n cá»¥c â†’ render **root app/error.tsx**.

---

## ğŸ’¡ 4ï¸âƒ£ NguyÃªn táº¯c

* Táº¡o **error.tsx** á»Ÿ má»—i layer náº¿u muá»‘n handle riÃªng
* **Root error.tsx** lÃ  fallback cuá»‘i cÃ¹ng
* Káº¿t há»£p vá»›i **loading.tsx** cho UX mÆ°á»£t mÃ 


---
[<< BÃ€I 24](./24.md) | [BÃ€I 26 >>](./26.md)