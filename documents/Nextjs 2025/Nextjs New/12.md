**📘  Private Folders (Thư mục riêng tư)** — một tính năng rất hay giúp bạn **ẩn các file hoặc thư mục không muốn Next.js coi là route**.

---

## 🧭 Private Folders trong Next.js

### 🎯 Mục tiêu

* Hiểu cơ chế **ẩn thư mục khỏi hệ thống routing**.
* Biết cách tổ chức thư mục dự án chuẩn “feature-based”.
* Biết khi nào nên dùng dấu gạch dưới `_` để tránh bị Next.js nhận làm route.

---

## 🧱 1️⃣ Vấn đề thực tế

Giả sử bạn có cấu trúc thế này:

```
app/
├── dashboard/
│   ├── page.tsx
│   ├── layout.tsx
│   └── components/
│       ├── Sidebar.tsx
│       └── Card.tsx
```

➡ Next.js sẽ **coi `components/` là một route**, vì nó nằm trong `app/`.

Nếu bạn vào `/dashboard/components`,
Next.js sẽ cố tìm `app/dashboard/components/page.tsx`
và báo lỗi **"Missing page.tsx"**.

---

## 🧩 2️⃣ Cách giải quyết — dùng Private Folders

Để Next.js **bỏ qua hoàn toàn thư mục đó**,
chỉ cần **đặt dấu gạch dưới `_` trước tên thư mục**:

```
app/
├── dashboard/
│   ├── page.tsx
│   ├── layout.tsx
│   └── _components/
│       ├── Sidebar.tsx
│       └── Card.tsx
```

➡ Bây giờ `_components/` **không được xem là route**,
mà chỉ là thư mục lưu trữ nội bộ.

---

## ⚙️ 3️⃣ Nguyên tắc hoạt động

* Bất kỳ thư mục nào bắt đầu bằng `_` sẽ bị Next.js bỏ qua khi build routing.
* Bạn vẫn có thể **import tự do** từ đó.
* Hữu ích cho các thư mục như:

  * `_components/` → chứa UI con
  * `_utils/` → chứa logic nội bộ
  * `_hooks/` → chứa custom hooks
  * `_constants/` → chứa giá trị config riêng

---

## 📄 4️⃣ Ví dụ thực tế

```tsx
// app/dashboard/_components/Sidebar.tsx
export default function Sidebar() {
  return (
    <aside
      style={{
        background: "#fafafa",
        padding: "1rem",
        borderRight: "1px solid #ddd",
        minHeight: "100vh",
      }}
    >
      <h3>📋 Dashboard Menu</h3>
      <ul>
        <li><a href="/dashboard">Overview</a></li>
        <li><a href="/dashboard/analytics">Analytics</a></li>
        <li><a href="/dashboard/settings">Settings</a></li>
      </ul>
    </aside>
  );
}
```

```tsx
// app/dashboard/layout.tsx
import Sidebar from "./_components/Sidebar";

export default function DashboardLayout({ children }: { children: React.ReactNode }) {
  return (
    <div style={{ display: "flex" }}>
      <Sidebar />
      <main style={{ flex: 1, padding: "1rem" }}>{children}</main>
    </div>
  );
}
```

➡ `/dashboard` và các trang con vẫn hoạt động bình thường,
nhưng `_components` không tạo route.

---

## 🧠 5️⃣ Lợi ích của Private Folders

✅ Tránh lỗi “route ảo” do Next.js tự động routing
✅ Giúp codebase sạch hơn, rõ ràng hơn
✅ Dễ quản lý khi mỗi route có nhiều logic con

---

## 💬 6️⃣ Bài tập nhỏ

> Refactor lại `/dashboard` của bạn:
>
> * Tạo `_components/Sidebar.tsx` và `_components/Header.tsx`
> * Import chúng trong `layout.tsx`
> * Đảm bảo `_components` không bị xem là route


Dưới đây là **code mẫu đầy đủ cho bài tập Private Folder**:

---

### 📂 Cấu trúc thư mục

```
app/
 ├── dashboard/
 │    ├── layout.tsx
 │    ├── page.tsx
 │    └── _components/
 │         ├── Sidebar.tsx
 │         └── Header.tsx
```

---

### 🧱 `app/dashboard/_components/Sidebar.tsx`

```tsx
export default function Sidebar() {
  return (
    <aside
      style={{
        width: "220px",
        background: "#fafafa",
        padding: "1.2rem",
        borderRight: "1px solid #ddd",
        minHeight: "100vh",
      }}
    >
      <h3 style={{ marginBottom: "1rem" }}>📋 Dashboard Menu</h3>
      <ul style={{ display: "flex", flexDirection: "column", gap: "0.6rem" }}>
        <li><a href="/dashboard">Overview</a></li>
        <li><a href="/dashboard/analytics">Analytics</a></li>
        <li><a href="/dashboard/settings">Settings</a></li>
      </ul>
    </aside>
  );
}
```

---

### 🧱 `app/dashboard/_components/Header.tsx`

```tsx
export default function Header() {
  return (
    <header
      style={{
        background: "#fff",
        borderBottom: "1px solid #ddd",
        padding: "1rem",
        position: "sticky",
        top: 0,
        zIndex: 10,
      }}
    >
      <h2>📊 Dashboard Header</h2>
    </header>
  );
}
```

---

### 🧱 `app/dashboard/layout.tsx`

```tsx
import Sidebar from "./_components/Sidebar";
import Header from "./_components/Header";

export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <div style={{ display: "flex", minHeight: "100vh" }}>
      <Sidebar />
      <div style={{ flex: 1, display: "flex", flexDirection: "column" }}>
        <Header />
        <main style={{ padding: "1.5rem" }}>{children}</main>
      </div>
    </div>
  );
}
```

---

### 🧱 `app/dashboard/page.tsx`

```tsx
export default function DashboardPage() {
  return (
    <section>
      <h1>🏠 Dashboard Overview</h1>
      <p>Chào mừng bạn đến trang tổng quan. Đây là khu vực chính của Dashboard.</p>
    </section>
  );
}
```

---

✅ **Kết quả mong đợi:**

* `/dashboard` hiển thị giao diện có **Sidebar + Header**.
* `_components/` **không được Next.js build thành route** (bạn sẽ không vào được `/dashboard/_components`).
* Giao diện tách biệt, dễ mở rộng, chuẩn production structure.


---
[<< BÀI 11](./11.md) | [BÀI 13 >>](./13.md)