## 🧭 Route Groups trong Next.js

### 🎯 Mục tiêu

* Hiểu **Route Group** là gì và vì sao nó không ảnh hưởng đến URL.
* Biết cách **chia layout theo nhóm route** (VD: `(marketing)` vs `(dashboard)`).
* Hiểu cách **gắn layout riêng** cho từng nhóm.

---

## 🧱 1️⃣ Vấn đề thực tế

Giả sử bạn có cấu trúc:

```
app/
 ├── dashboard/
 │   └── page.tsx
 ├── settings/
 │   └── page.tsx
 ├── login/
 │   └── page.tsx
```

Bây giờ, bạn muốn:

* `dashboard` và `settings` **chia sẻ cùng một layout (dashboard layout)**
* `login` thì dùng layout riêng (auth layout)

Nếu bạn chỉ dùng `layout.tsx` ở cấp root → **mọi trang đều dùng chung layout**, điều này **không mong muốn**.

---

## 🧩 2️⃣ Cách giải quyết — Dùng Route Groups

Ta nhóm các route theo **folder có dấu ngoặc tròn `()`**, ví dụ:

```
app/
 ├── (dashboard)/
 │   ├── dashboard/
 │   │   └── page.tsx
 │   ├── settings/
 │   │   └── page.tsx
 │   └── layout.tsx        ← layout riêng cho nhóm dashboard
 ├── (auth)/
 │   ├── login/
 │   │   └── page.tsx
 │   └── layout.tsx        ← layout riêng cho nhóm auth
 └── layout.tsx            ← layout chung cho toàn site
```

✅ Các thư mục `(dashboard)` và `(auth)` **không xuất hiện trong URL**.
Ví dụ:

* `/dashboard` vẫn là `/dashboard`
* `/login` vẫn là `/login`

---

## ⚙️ 3️⃣ Cơ chế hoạt động

| Thư mục                  | Vai trò                                        |
| ------------------------ | ---------------------------------------------- |
| `(dashboard)/layout.tsx` | Áp dụng cho mọi route trong nhóm `(dashboard)` |
| `(auth)/layout.tsx`      | Áp dụng cho nhóm `(auth)`                      |
| `app/layout.tsx`         | Layout toàn cục                                |
| `(folder)`               | Không hiển thị trong URL                       |

> 💡 Next.js tự động **gắn layout theo nhóm route** từ trong ra ngoài (nested).

---

## 📄 4️⃣ Ví dụ thực tế

**📁 Cấu trúc:**

```
app/
 ├── (dashboard)/
 │   ├── layout.tsx
 │   ├── dashboard/
 │   │   └── page.tsx
 │   └── settings/
 │       └── page.tsx
 ├── (auth)/
 │   ├── layout.tsx
 │   └── login/
 │       └── page.tsx
 └── layout.tsx
```

**🧱 `app/(dashboard)/layout.tsx`**

```tsx
export default function DashboardGroupLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <div style={{ display: "flex" }}>
      <aside
        style={{
          width: "200px",
          background: "#f0f0f0",
          padding: "1rem",
          minHeight: "100vh",
        }}
      >
        <h4>📊 Dashboard Menu</h4>
        <ul>
          <li><a href="/dashboard">Overview</a></li>
          <li><a href="/settings">Settings</a></li>
        </ul>
      </aside>
      <main style={{ flex: 1, padding: "2rem" }}>{children}</main>
    </div>
  );
}
```

**🧱 `app/(dashboard)/dashboard/page.tsx`**

```tsx
export default function DashboardPage() {
  return <h1>📈 Dashboard Overview</h1>;
}
```

**🧱 `app/(dashboard)/settings/page.tsx`**

```tsx
export default function SettingsPage() {
  return <h1>⚙️ Settings Page</h1>;
}
```

**🧱 `app/(auth)/layout.tsx`**

```tsx
export default function AuthLayout({ children }: { children: React.ReactNode }) {
  return (
    <div
      style={{
        display: "flex",
        justifyContent: "center",
        alignItems: "center",
        height: "100vh",
        background: "#f9fafb",
      }}
    >
      <div
        style={{
          background: "#fff",
          padding: "2rem",
          border: "1px solid #ddd",
          borderRadius: "8px",
        }}
      >
        {children}
      </div>
    </div>
  );
}
```

**🧱 `app/(auth)/login/page.tsx`**

```tsx
export default function LoginPage() {
  return (
    <form>
      <h2>🔐 Login</h2>
      <input type="text" placeholder="Username" />
      <br />
      <input type="password" placeholder="Password" />
      <br />
      <button>Login</button>
    </form>
  );
}
```

---

## 🧠 5️⃣ Lợi ích của Route Groups

✅ Dễ tổ chức code theo tính năng (feature-based).
✅ Layout rõ ràng cho từng nhóm (Auth, Dashboard, Marketing…).
✅ URL vẫn sạch, không bị thêm `/dashboard/` dư thừa.
✅ Giúp chia tách logic, tránh render thừa layout.

---

## 💬 6️⃣ Bài tập nhỏ

Hãy:

1. Tạo hai nhóm route: `(dashboard)` và `(auth)`.
2. Mỗi nhóm có layout riêng.
3. `/dashboard` và `/settings` dùng layout Dashboard.
4. `/login` dùng layout Auth.
5. Kiểm tra URL → đảm bảo **không chứa `(dashboard)` hoặc `(auth)`**.


---
[<< BÀI 12](./12.md) | [BÀI 14 >>](./14.md)