## 🧭 File Colocation trong Next.js

### 🎯 Mục tiêu

* Hiểu khái niệm **File Colocation** và vì sao nó giúp tổ chức project tốt hơn.
* Biết cách để **đặt file phụ trợ (component, util, hook, v.v.)** cùng cấp với route mà không ảnh hưởng đến routing.
* Phân biệt rõ **file public trong route** và **file ẩn (private)**.

---

## 🧱 1️⃣ Khái niệm cơ bản

Trong App Router, **mọi thư mục trong `app/` đều có thể trở thành một route** nếu chứa file `page.tsx`, `layout.tsx`, v.v.
Tuy nhiên, bạn vẫn **có thể đặt các file khác trong cùng thư mục route mà không biến chúng thành route**.
Cơ chế này gọi là **File Colocation**.

---

### 🔹 Ví dụ cơ bản

```
app/
├── dashboard/
│   ├── layout.tsx
│   ├── page.tsx
│   ├── Chart.tsx         ← file Colocation (chỉ dùng nội bộ)
│   ├── utils.ts          ← file Colocation (hàm phụ trợ)
│   └── components/
│       └── Card.tsx      ← component phụ trợ
```

➡ Các file `Chart.tsx`, `utils.ts`, `Card.tsx` **không tạo route riêng** —
chúng chỉ là file phụ trợ cho `/dashboard`.

---

## 🧩 2️⃣ Khi nào dùng File Colocation

Dùng khi bạn muốn:

* Giữ **component, logic và UI liên quan trong cùng một thư mục route**.
* Tránh việc phải tạo quá nhiều thư mục “shared” hoặc “components” không cần thiết.
* Dễ **refactor hoặc xóa route** mà không sợ sót file.

Ví dụ: tất cả logic của `/dashboard` đều nằm trong `app/dashboard/`, dễ tìm và dễ bảo trì.

---

## ⚙️ 3️⃣ File Colocation KHÔNG trở thành route nếu:

✅ Không có tên đặc biệt (`page.tsx`, `layout.tsx`, `loading.tsx`, `error.tsx`, `not-found.tsx`, v.v.)
✅ Không nằm trong thư mục có `[param]` hoặc segment đặc biệt

---

## 📄 4️⃣ Ví dụ minh họa

```tsx
// app/dashboard/page.tsx
import Chart from "./Chart";

export default function DashboardPage() {
  return (
    <section style={{ padding: "1rem" }}>
      <h1>📊 Dashboard Overview</h1>
      <Chart />
    </section>
  );
}
```

```tsx
// app/dashboard/Chart.tsx
export default function Chart() {
  return (
    <div
      style={{
        background: "#f2f2f2",
        padding: "1rem",
        borderRadius: 8,
        marginTop: "1rem",
      }}
    >
      <h3>📈 Sales Chart</h3>
      <p>Data visualization coming soon...</p>
    </div>
  );
}
```

➡ `/dashboard` chỉ hiển thị một route duy nhất, nhưng logic UI chia nhỏ rõ ràng trong cùng thư mục.

---

## 🧠 5️⃣ Ưu điểm

✅ Tổ chức module theo **feature-based structure**
✅ Dễ di chuyển hoặc xoá route mà không ảnh hưởng nơi khác
✅ Code sạch hơn, giảm số lượng import rối rắm từ nhiều thư mục

---

## 💬 6️⃣ Bài tập nhỏ

> Refactor lại route `/dashboard/analytics` bằng cách:
>
> * Tạo file `Chart.tsx` và `Table.tsx` trong cùng thư mục.
> * Import chúng vào `page.tsx`.
> * Đảm bảo cả 2 file chỉ dùng nội bộ, không tạo route mới.


---
[<< BÀI 10](./10.md) | [BÀI 12 >>](./12.md)