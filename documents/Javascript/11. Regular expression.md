# Regular expression

<details>
<summary><strong>1. Tìm hiểu Regex trong JavaScript</strong></summary>

---

## **1. Khởi tạo Regular Expression**

Có hai cách:

```js
var re1 = new RegExp("abc");
var re2 = /abc/;
```

Cả hai đều biểu diễn khuôn mẫu `"abc"`.

---

## **2. Một số phương thức cơ bản**

### **2.1. Phương thức `test`**

Kiểm tra xem string có chứa pattern hay không.

```js
/abc/.test("abcde");      // true
/abc/.test("12abcde");    // true
/abc/.test("abxcde");     // false
```

### **2.2. Kiểm tra tập hợp ký tự**

```js
/[0-9]/.test("in 1992");  // true
/[0-5]/.test("Gold 9999"); // false
```

**Các ký tự đặc biệt:**

* `\d` : chữ số 0-9
* `\w` : chữ cái hoặc số hoặc `_`
* `\s` : ký tự trắng (space, tab, newline)
* `\D` : không phải chữ số
* `\W` : không phải chữ cái
* `\S` : không phải ký tự trắng
* `.` : bất kỳ ký tự nào trừ newline

Ví dụ kiểm tra định dạng ngày giờ: `dd-mm-yyyy hh:mm`

```js
var dateTime = /\d\d-\d\d-\d\d\d\d \d\d:\d\d/;
dateTime.test("30-01-2003 15:20"); // true
dateTime.test("30-jan-2003 15:20"); // false
```

### **2.3. Đảo ngược tập hợp ký tự**

```js
var notBinary = /[^01]/;
notBinary.test("1100100010100110"); // false
notBinary.test("1100100010200110"); // true
```

---

## **3. Biểu diễn số lần lặp**

| Ký hiệu | Ý nghĩa                  |
| ------- | ------------------------ |
| `+`     | xuất hiện ≥ 1 lần        |
| `*`     | xuất hiện ≥ 0 lần        |
| `?`     | xuất hiện 0 hoặc 1 lần   |
| `{n}`   | xuất hiện đúng n lần     |
| `{x,y}` | xuất hiện từ x đến y lần |
| `{x,}`  | xuất hiện ≥ x lần        |

Ví dụ:

```js
/'\d+'/.test("'123'"); // true
/'\d*'/.test("''");    // true
/neighbou?r/.test("neighbor"); // true
/\d{2,4}/.test("12345");      // true
```

---

## **4. Nhóm và lựa chọn pattern**

### **4.1. Nhóm**

```js
var cartoonCrying = /boo+(hoo+)+/i;
cartoonCrying.test("Boohoooohoohooo"); // true
```

### **4.2. Lựa chọn pattern**

```js
var animalCount = /\d+ (pig|cow|chicken)s?/;
animalCount.test("15 pigs"); // true
animalCount.test("15 pigchickens"); // false
```

---

## **5. Phương thức `exec`**

Trả về thông tin trùng khớp hoặc `null`.

```js
/\d+/.exec("one two 100 200");
// => ["100", index: 8, input: "one two 100 200"]
```

**Với group:**

```js
var quotedText = /'([^']*)'/;
quotedText.exec("she said 'hello'");
// => ["'hello'", "hello", index: 9, input: "she said 'hello'"]
```

> Lưu ý: Nếu group trùng nhiều lần, `exec` chỉ trả kết quả cuối cùng của group.

---

## **6. Trích xuất dữ liệu từ string**

```js
function findDate(string) {
  var dateTime = /(\d{1,2})-(\d{1,2})-(\d{4})/;
  var match = dateTime.exec(string);
  return {
    day: match[1],
    month: match[2],
    year: match[3],
  };
}

findDate("30-1-2003");
// => {day: "30", month: "1", year: "2003"}
```

### **Ranh giới string**

* `^` : bắt đầu string
* `$` : kết thúc string
* `\b` : ranh giới từ

```js
/^(\d{1,2})-(\d{1,2})-(\d{4})$/.exec("30-1-2003"); // hợp lệ
/\b(\d{1,2})-(\d{1,2})-(\d{4})\b/.exec("Hello 30-1-2003 Haha"); // hợp lệ
```

---

## **7. Tạo RegExp linh động**

```js
var name = "lampv";
var text = "LamPV is a suspicious character.";
var regexp = new RegExp("\\b(" + name + ")\\b", "gi");
console.log(text.replace(regexp, "_$1_"));
// => _LamPV_ is a suspicious character.
```

* `g`: global (tất cả trùng khớp)
* `i`: ignore case (không phân biệt hoa thường)
* `$1`: nội dung của group đầu tiên

---

## **8. Tóm tắt các ký hiệu cơ bản**

| Ký hiệu    | Ý nghĩa                         |     |                       |
| ---------- | ------------------------------- | --- | --------------------- |
| `/abc/`    | chuỗi `"abc"`                   |     |                       |
| `/[abc]/`  | bất kỳ ký tự a, b, c            |     |                       |
| `/[^abc]/` | bất kỳ ký tự không phải a, b, c |     |                       |
| `/[0-9]/`  | chữ số 0-9                      |     |                       |
| `x+`       | xuất hiện ≥ 1 lần               |     |                       |
| `x*`       | xuất hiện ≥ 0 lần               |     |                       |
| `x?`       | xuất hiện 0 hoặc 1 lần          |     |                       |
| `x{2,4}`   | xuất hiện từ 2 đến 4 lần        |     |                       |
| `(abc)`    | nhóm `abc`                      |     |                       |
| \`a        | b                               | c\` | một trong các pattern |
| `\d`       | chữ số 0-9                      |     |                       |
| `\w`       | chữ cái, số, `_`                |     |                       |
| `\s`       | ký tự trắng                     |     |                       |
| `.`        | bất kỳ ký tự nào trừ newline    |     |                       |
| `\b`       | ranh giới từ                    |     |                       |
| `^`        | bắt đầu string                  |     |                       |
| `$`        | kết thúc string                 |     |                       |

---

**Tham khảo:** [Regular Expressions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)

</details>
<details>
<summary><strong>2. Một số biểu thức regex hay</strong></summary>

Trong bài viết tìm hiểu Regular Expression JavaScript, mình tổng hợp lại một số biểu thức chính quy RegExp hay mà mình sưu tầm được.

### Kiến thức cơ bản về RegExp:

* `/abc/` : chuỗi các kí tự abc
* `/[abc]/` : bất kỳ kí tự nào thuộc tập a, b, c
* `/[^abc]/` : bất kỳ kí tự nào không thuộc tập a, b, c
* `/[0-9]/` : bất kỳ kí tự nào từ 0 đến 9
* `/x+/` : x xuất hiện >= 1 lần
* `/x*/` : x xuất hiện >= 0 lần
* `/x?/` : x xuất hiện 0 hoặc 1 lần
* `/x{2,4}/` : x xuất hiện từ 2 đến 4 lần
* `/(abc)/` : cụm abc
* `/a|b|c/` : bất kì pattern nào trong a, b, c
* `/\d/` : chữ số từ 0 đến 9
* `/\w/` : chữ cái
* `/\s/` : ký tự trắng (dấu cách, tab, dòng mới)
* `/./` : bất kỳ ký tự nào trừ dòng mới
* `/\b/` : ranh giới từ
* `/^/` : bắt đầu string
* `/$/` : kết thúc string

---

### Một số regex thông dụng

**1. Chỉ chữ cái (a-z, A-Z)**

```js
/^[a-zA-Z]+$/;
```

**2. Chỉ số**

```js
/^\d+$/;
```

**3. Chữ và số (alphanumeric)**

```js
/^[a-zA-Z0-9]+$/;
```

**4. Base64**

```js
/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;
```

**5. Boolean**

```js
/^true|false$/;
```

**6. Số thập phân**

```js
/^[+-]?((\d+(\.\d*)?)|(\.\d+))$/;
```

**7. Hexadecimal**

```js
/^[0-9a-fA-F]+$/;
```

**8. Mã màu Hex**

```js
/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;
```

**9. Mã màu RGB**

```js
/^rgb\(((\s*(\d|[1-9]\d|1\d\d|2[0-4][0-9]|25[0-5])\s*),){2}(\s*(\d|[1-9]\d|1\d\d|2[0-4][0-9]|25[0-5])\s*)\)$/;
```

**10. Mã màu RGBA**

```js
/^rgba\(((\s*(\d|[1-9]\d|1\d\d|2[0-4][0-9]|25[0-5])\s*),){3}(\s*(1(\.0+)?|0?\.\d+)\s*)\)$/;
```

**11. Email**

```js
/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i;
```

**12. IPv4**

```js
/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;
```

**13. MAC Address**

```js
/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/;
```

**14. MD5**

```js
/^[a-f0-9]{32}$/;
```

**15. Số điện thoại Việt Nam**

```js
/^(0|\+84)(\s|\.)?((3[2-9])|(5[689])|(7[06-9])|(8[1-689])|(9[0-46-9]))(\d)(\s|\.)?(\d{3})(\s|\.)?(\d{3})$/;
```

**16. Mật khẩu mạnh**

* Tối thiểu 8 ký tự
* Ít nhất 1 chữ thường, 1 chữ hoa, 1 số, 1 ký tự đặc biệt

```js
/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*]).{8,}$/;
```

---

### Lời kết

Regular Expression là một chủ đề phức tạp, khó để có biểu thức chuẩn tuyệt đối. Khi áp dụng vào project thực tế, nên kiểm tra lại và kết hợp với các phương pháp khác thay vì chỉ copy-paste.

</details>
