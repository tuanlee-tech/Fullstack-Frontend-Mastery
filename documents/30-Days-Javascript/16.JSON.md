# Ngày 16

## JSON

**JSON** (JavaScript Object Notation) là một định dạng dữ liệu dạng chuỗi, nhẹ, dùng để lưu trữ và truyền dữ liệu. JSON thường được sử dụng khi gửi dữ liệu từ server đến client và là một thay thế dễ dùng hơn so với XML. Khác biệt chính giữa JSON và đối tượng JavaScript là các khóa trong JSON phải được đặt trong dấu ngoặc kép.

**Ví dụ JSON**:

```js
{
  "users": [
    {
      "firstName": "Asabeneh",
      "lastName": "Yetayeh",
      "age": 250,
      "email": "asab@asb.com"
    },
    {
      "firstName": "Alex",
      "lastName": "James",
      "age": 25,
      "email": "alex@alex.com"
    }
  ]
}
```

### Chuyển JSON thành đối tượng JavaScript

#### JSON.parse()

Phương thức `JSON.parse()` chuyển chuỗi JSON thành đối tượng JavaScript.

```js
const usersText = `{
  "users": [
    {
      "firstName": "Asabeneh",
      "lastName": "Yetayeh",
      "age": 250,
      "email": "asab@asb.com"
    },
    {
      "firstName": "Alex",
      "lastName": "James",
      "age": 25,
      "email": "alex@alex.com"
    }
  ]
}`

const usersObj = JSON.parse(usersText)
console.log(usersObj)
/*
{
  users: [
    { firstName: 'Asabeneh', lastName: 'Yetayeh', age: 250, email: 'asab@asb.com' },
    { firstName: 'Alex', lastName: 'James', age: 25, email: 'alex@alex.com' }
  ]
}
*/
```

### Sử dụng hàm reviver với JSON.parse()

Hàm `reviver` là tham số tùy chọn để định dạng giá trị khi phân tích JSON.

```js
const usersObj = JSON.parse(usersText, (key, value) => {
  return typeof value === 'string' && key !== 'email' ? value.toUpperCase() : value
})
console.log(usersObj)
/*
{
  users: [
    { firstName: 'ASABENEH', lastName: 'YETAYEH', age: 250, email: 'asab@asb.com' },
    { firstName: 'ALEX', lastName: 'JAMES', age: 25, email: 'alex@alex.com' }
  ]
}
*/
```

### Chuyển đối tượng thành JSON

#### JSON.stringify()

Phương thức `JSON.stringify()` chuyển đối tượng JavaScript thành chuỗi JSON.

```js
const users = {
  Alex: {
    email: 'alex@alex.com',
    skills: ['HTML', 'CSS', 'JavaScript'],
    age: 20,
    isLoggedIn: false,
    points: 30
  },
  Asab: {
    email: 'asab@asab.com',
    skills: ['HTML', 'CSS', 'JavaScript', 'Redux', 'MongoDB', 'Express', 'React', 'Node'],
    age: 25,
    isLoggedIn: false,
    points: 50
  }
}

const txt = JSON.stringify(users, undefined, 4)
console.log(txt)
/*
{
    "Alex": {
        "email": "alex@alex.com",
        "skills": [
            "HTML",
            "CSS",
            "JavaScript"
        ],
        "age": 20,
        "isLoggedIn": false,
        "points": 30
    },
    "Asab": {
        "email": "asab@asab.com",
        "skills": [
            "HTML",
            "CSS",
            "JavaScript",
            "Redux",
            "MongoDB",
            "Express",
            "React",
            "Node"
        ],
        "age": 25,
        "isLoggedIn": false,
        "points": 50
    }
}
*/
```

### Sử dụng mảng lọc với JSON.stringify

Tham số `replacer` (mảng lọc) cho phép chọn các khóa muốn giữ lại.

```js
const user = {
  firstName: 'Asabeneh',
  lastName: 'Yetayeh',
  country: 'Finland',
  city: 'Helsinki',
  email: 'alex@alex.com',
  skills: ['HTML', 'CSS', 'JavaScript', 'React', 'Python'],
  age: 250
}

const txt = JSON.stringify(user, ['firstName', 'lastName', 'country', 'city', 'age'], 4)
console.log(txt)
/*
{
    "firstName": "Asabeneh",
    "lastName": "Yetayeh",
    "country": "Finland",
    "city": "Helsinki",
    "age": 250
}
*/
```

---

## Bài tập: Ngày 16

### Bài tập: Cấp độ 1

1. **Chuyển mảng skills thành JSON**

```js
const skills = ['HTML', 'CSS', 'JS', 'React', 'Node', 'Python']
const skillsJSON = JSON.stringify(skills)
console.log(skillsJSON) // ["HTML","CSS","JS","React","Node","Python"]
```

2. **Chuyển biến age thành JSON**

```js
let age = 250
const ageJSON = JSON.stringify(age)
console.log(ageJSON) // 250
```

3. **Chuyển biến isMarried thành JSON**

```js
let isMarried = true
const isMarriedJSON = JSON.stringify(isMarried)
console.log(isMarriedJSON) // true
```

4. **Chuyển đối tượng student thành JSON**

```js
const student = {
  firstName: 'Asabeneh',
  lastName: 'Yetayehe',
  age: 250,
  isMarried: true,
  skills: ['HTML', 'CSS', 'JS', 'React', 'Node', 'Python']
}
const studentJSON = JSON.stringify(student)
console.log(studentJSON)
/*
{"firstName":"Asabeneh","lastName":"Yetayehe","age":250,"isMarried":true,"skills":["HTML","CSS","JS","React","Node","Python"]}
*/
```

### Bài tập: Cấp độ 2

1. **Chuyển đối tượng student chỉ với firstName, lastName và skills**

```js
const studentJSON = JSON.stringify(student, ['firstName', 'lastName', 'skills'], 4)
console.log(studentJSON)
/*
{
    "firstName": "Asabeneh",
    "lastName": "Yetayehe",
    "skills": [
        "HTML",
        "CSS",
        "JS",
        "React",
        "Node",
        "Python"
    ]
}
*/
```

### Bài tập: Cấp độ 3

1. **Chuyển txt JSON thành đối tượng**

```js
const usersObj = JSON.parse(txt)
console.log(usersObj)
/*
{
  Alex: { email: 'alex@alex.com', skills: ['HTML', 'CSS', 'JavaScript'], age: 20, isLoggedIn: false, points: 30 },
  Asab: { email: 'asab@asab.com', skills: ['HTML', 'CSS', 'JavaScript', 'Redux', 'MongoDB', 'Express', 'React', 'Node'], age: 25, isLoggedIn: false, points: 50 },
  ...
}
*/
```

2. **Tìm người có nhiều kỹ năng nhất**

```js
const usersObj = JSON.parse(txt)
const userWithMostSkills = Object.keys(usersObj).reduce((max, user) =>
  usersObj[user].skills.length > usersObj[max].skills.length ? user : max
)
console.log(userWithMostSkills) // Asab
```

---

[<< Ngày 15](./15.Classes.md) | [Ngày 17 >>](./17.Web_Storages.md)