
## ğŸ½ï¸ **PROJECT 2: Smart Meal Planner**

### ğŸ“– **Project Overview**
á»¨ng dá»¥ng láº­p káº¿ hoáº¡ch bá»¯a Äƒn thÃ´ng minh giÃºp ngÆ°á»i dÃ¹ng tÃ¬m cÃ´ng thá»©c náº¥u Äƒn phÃ¹ há»£p vá»›i ngÃ¢n sÃ¡ch, lÆ°á»£ng calo má»¥c tiÃªu, vÃ  nguyÃªn liá»‡u sáºµn cÃ³. Giáº£i quyáº¿t váº¥n Ä‘á»: "HÃ´m nay Äƒn gÃ¬? LÃ m sao Äƒn Ä‘á»§ dinh dÆ°á»¡ng mÃ  tiáº¿t kiá»‡m?"

### ğŸ¯ **Target Users**
- NgÆ°á»i báº­n rá»™n khÃ´ng cÃ³ thá»i gian nghÄ© thá»±c Ä‘Æ¡n
- NgÆ°á»i táº­p gym cáº§n track calories
- NgÆ°á»i sá»‘ng tiáº¿t kiá»‡m, quáº£n lÃ½ ngÃ¢n sÃ¡ch cháº·t
- NgÆ°á»i muá»‘n Äƒn Ä‘á»§ dinh dÆ°á»¡ng
- Gia Ä‘Ã¬nh muá»‘n Ä‘a dáº¡ng mÃ³n Äƒn

### ğŸš€ **MVP - Week 1-2 (Core Features)**

**User Story 1: User Preferences Setup**
```
AS A new user
I WANT TO set my dietary preferences
SO THAT I get personalized meal suggestions
```
**Acceptance Criteria:**
- âœ… Onboarding wizard (3 steps)
- âœ… Step 1: Daily budget (VND or USD)
- âœ… Step 2: Calorie goal (with calculator: gender, age, weight, activity level)
- âœ… Step 3: Dietary restrictions (vegetarian, vegan, gluten-free, halal, etc.)
- âœ… Save preferences
- âœ… Skip onboarding (use defaults)

**User Story 2: Daily Meal Suggestions**
```
AS A user
I WANT TO see meal suggestions for today
SO THAT I know what to cook
```
**Acceptance Criteria:**
- âœ… Generate 3 meals: Breakfast, Lunch, Dinner
- âœ… Each meal shows: Image, Name, Calories, Estimated cost, Cooking time
- âœ… Total daily calories displayed
- âœ… Total daily cost displayed
- âœ… Refresh button to get new suggestions
- âœ… Suggestions based on user preferences
- âœ… "I don't like this" button (replace meal)

**User Story 3: Recipe Details**
```
AS A user
I WANT TO see detailed recipe information
SO THAT I can cook the meal
```
**Acceptance Criteria:**
- âœ… Ingredients list with quantities
- âœ… Step-by-step instructions
- âœ… Nutritional information (calories, protein, carbs, fats)
- âœ… Cooking time (prep + cook)
- âœ… Serving size
- âœ… Recipe image (high quality)
- âœ… Difficulty level (Easy, Medium, Hard)

**User Story 4: Save Favorite Recipes**
```
AS A user
I WANT TO save recipes I like
SO THAT I can easily find them later
```
**Acceptance Criteria:**
- âœ… Heart icon to save recipe
- âœ… "My Favorites" page
- âœ… Grid view with images
- âœ… Unsave recipe
- âœ… Empty state message

**User Story 5: Basic Search**
```
AS A user
I WANT TO search for specific recipes
SO THAT I can find what I'm craving
```
**Acceptance Criteria:**
- âœ… Search by recipe name or ingredient
- âœ… Filter by meal type (breakfast, lunch, dinner, snack)
- âœ… Filter by cuisine (Vietnamese, Italian, Chinese, etc.)
- âœ… Filter by cooking time (< 15 min, 15-30 min, > 30 min)
- âœ… Sort by: Relevance, Calories (low to high), Cost (low to high)
- âœ… Show result count
- âœ… Pagination (20 results per page)

**Database Schema (MVP):**
```prisma
model User {
  id                String         @id @default(cuid())
  email             String         @unique
  name              String
  dailyBudget       Decimal?       @db.Decimal(10, 2)
  dailyCalories     Int?
  dietaryPrefs      String[]       // ["vegetarian", "gluten-free"]
  savedRecipes      SavedRecipe[]
  mealPlans         MealPlan[]
  pantryItems       PantryItem[]
  createdAt         DateTime       @default(now())
}

model SavedRecipe {
  id          String   @id @default(cuid())
  userId      String
  recipeId    String   // External API ID
  recipeName  String
  recipeData  Json     // Cache full recipe
  imageUrl    String?
  calories    Int
  cost        Decimal  @db.Decimal(10, 2)
  createdAt   DateTime @default(now())
  
  @@unique([userId, recipeId])
}

model MealPlan {
  id            String   @id @default(cuid())
  userId        String
  date          DateTime
  breakfast     Json?    // { recipeId, recipeName, calories, cost }
  lunch         Json?
  dinner        Json?
  snacks        Json?
  totalCalories Int
  totalCost     Decimal  @db.Decimal(10, 2)
  createdAt     DateTime @default(now())
  
  @@unique([userId, date])
}

model PantryItem {
  id          String    @id @default(cuid())
  userId      String
  name        String
  quantity    String    // "500g", "2 cups"
  unit        String
  category    String    // "Vegetables", "Meat", "Grains"
  expiryDate  DateTime?
  createdAt   DateTime  @default(now())
}
```

---

### ğŸ“ˆ **Phase 2 - Week 3 (Enhanced Features)**

**Feature 1: Pantry Management**
```
AS A user
I WANT TO track ingredients I already have
SO THAT the app suggests recipes using my pantry items
```
**Acceptance Criteria:**
- âœ… Add pantry item (name, quantity, expiry date, category)
- âœ… List all pantry items grouped by category
- âœ… Edit/Delete pantry items
- âœ… Quick add from ingredient list (while viewing recipe)
- âœ… Expiry date alerts (items expiring in 3 days)
- âœ… "Use up" mode: Recipes using items about to expire

**Feature 2: Recipes Based on Pantry**
```
AS A user
I WANT TO see recipes I can cook with what I have
SO THAT I reduce food waste and grocery trips
```
**Acceptance Criteria:**
- âœ… "Cook from pantry" button
- âœ… Algorithm: Find recipes with max pantry ingredient match
- âœ… Show match percentage (e.g., "You have 8/10 ingredients")
- âœ… Highlight missing ingredients
- âœ… Option to add missing ingredients to shopping list

**Feature 3: Shopping List Generation**
```
AS A user
I WANT TO generate a shopping list from my meal plan
SO THAT I know exactly what to buy
```
**Acceptance Criteria:**
- âœ… Select meals for the week
- âœ… Auto-generate shopping list (aggregated ingredients)
- âœ… Subtract pantry items (if enabled)
- âœ… Group by category (Vegetables, Meat, Dairy, etc.)
- âœ… Check off items as you shop
- âœ… Add custom items manually
- âœ… Share shopping list (WhatsApp, SMS, Email)
- âœ… Print-friendly view

**Feature 4: Weekly Meal Planning**
```
AS A user
I WANT TO plan meals for the whole week
SO THAT I can shop once and save time
```
**Acceptance Criteria:**
- âœ… Calendar view (7 days)
- âœ… Drag & drop recipes to days
- âœ… Auto-generate weekly plan (button)
- âœ… Balance variety (no repeated ingredients)
- âœ… Stay within weekly budget
- âœ… Weekly calorie average chart
- âœ… Copy week to next week
- âœ… Share meal plan (PDF export)

**Feature 5: Nutritional Insights**
```
AS A user
I WANT TO see my nutritional intake over time
SO THAT I ensure balanced diet
```
**Acceptance Criteria:**
- âœ… Daily nutrition breakdown (calories, protein, carbs, fats, fiber)
- âœ… Weekly average chart
- âœ… Compare to recommended intake
- âœ… Highlight deficiencies (e.g., "Low protein this week")
- âœ… Macro ratio pie chart
- âœ… Micronutrients (vitamins, minerals) - optional

---

### ğŸš€ **Phase 3 - Week 4 (Advanced Features)**

**Feature 1: Custom Recipe Creation**
```
AS A user
I WANT TO add my own recipes
SO THAT I can save family recipes
```
**Acceptance Criteria:**
- âœ… Rich text editor for instructions
- âœ… Ingredient list builder (add/remove rows)
- âœ… Upload recipe image
- âœ… Calculate nutritional info (from ingredients)
- âœ… Estimate cost (from ingredient prices)
- âœ… Set cooking time, difficulty, servings
- âœ… Tag recipe (Vietnamese, quick, healthy, etc.)
- âœ… Share recipe with community (optional)

**Feature 2: Recipe Scaling**
```
AS A user
I WANT TO adjust recipe serving size
SO THAT I can cook for different numbers of people
```
**Acceptance Criteria:**
- âœ… Dropdown: 1, 2, 4, 6, 8 servings
- âœ… Auto-scale all ingredient quantities
- âœ… Adjust cooking time (if needed)
- âœ… Recalculate nutrition per serving

**Feature 3: Meal Prep Mode**
```
AS A user
I WANT TO plan batch cooking sessions
SO THAT I can prepare meals in advance
```
**Acceptance Criteria:**
- âœ… Select recipes that store well (3-5 days)
- âœ… Batch cooking suggestions (make 4 servings, eat over 2 days)
- âœ… Prep timeline (Sunday: cook these 3 recipes)
- âœ… Storage tips (containers, labeling)
- âœ… Reheating instructions

**Feature 4: Grocery Delivery Integration**
```
AS A user
I WANT TO order ingredients directly
SO THAT I save time going to the market
```
**Acceptance Criteria:**
- âœ… Connect to grocery delivery API (e.g., Grab, Now, Baemin)
- âœ… One-click add shopping list to cart
- âœ… Price comparison between stores
- âœ… Track delivery status

**Feature 5: Social Features**
```
AS A user
I WANT TO share my meal plans with family
SO THAT everyone knows what's for dinner
```
**Acceptance Criteria:**
- âœ… Share weekly meal plan (link)
- âœ… Family/Household account (multiple users)
- âœ… Voting system (family votes on meals)
- âœ… Comments on recipes
- âœ… Cook this together" - collaborative cooking

**Feature 6: AI-Powered Suggestions**
```
AS A user
I WANT TO get smart meal recommendations
SO THAT I discover new recipes suited to my taste
```
**Acceptance Criteria:**
- âœ… Learn from user favorites (ML recommendation)
- âœ… "You might also like" suggestions
- âœ… Seasonal ingredient suggestions
- âœ… Budget optimization tips
- âœ… Leftover management (use yesterday's rice in today's fried rice)

---

### ğŸ¨ **UI/UX Requirements**

**Design Principles:**
- Appetite appeal (beautiful food images)
- Quick interaction (add to meal plan in 1 click)
- Visual nutrition info (color-coded macros)
- Mobile-optimized (most users cook from phone)

**Key Screens:**
1. **Home/Dashboard** - Today's meal suggestions
2. **Discover** - Search & browse recipes
3. **Meal Planner** - Weekly calendar view
4. **Pantry** - Ingredient inventory
5. **Shopping List** - Checklist with categories
6. **My Recipes** - Saved & custom recipes
7. **Settings** - Preferences, dietary restrictions

**Color Scheme:**
- Primary: Orange (#F97316) - appetite stimulation
- Secondary: Green (#10B981) - healthy, fresh
- Accent: Yellow (#FBBF24) - warm, inviting
- Background: Cream (#FFFBEB) - soft, appetizing

---

### ğŸ§ª **Testing Strategy**

**Unit Tests:**
- Calorie calculation from ingredients
- Budget estimation logic
- Recipe matching algorithm (pantry)
- Shopping list aggregation
- Serving size scaling

**Integration Tests:**
- External API integration (recipe APIs)
- Image upload & optimization
- PDF generation (meal plan export)
- Calendar date handling (timezones)

**E2E Tests:**
```typescript
test('User can plan a week of meals and generate shopping list', async ({ page }) => {
  await page.goto('/meal-planner')
  
  // Add meals to calendar
  await page.click('[data-day="monday"] [data-meal="breakfast"]')
  await page.click('text=Pho Bo')
  await page.click('text=Add to Plan')
  
  // Repeat for other meals...
  
  // Generate shopping list
  await page.click('text=Generate Shopping List')
  await expect(page.locator('text=Rice noodles')).toBeVisible()
  await expect(page.locator('text=Beef')).toBeVisible()
})
```

---

### ğŸ“Š **Success Metrics**

**Technical:**
- Recipe search < 500ms
- Image load time < 1s (optimized)
- API cache hit rate > 80%
- Offline recipe viewing (PWA)

**User Experience:**
- Time to plan a week < 5 minutes
- Shopping list generation < 3 seconds
- Recipe satisfaction rate > 80%

**Business:**
- Weekly active users
- Recipes saved per user (avg > 10)
- Meal plans created per week
- Feature usage (pantry, shopping list)

---

### ğŸ”Œ **API Integration**

**Recipe APIs:**
- **Spoonacular** (primary) - 150 requests/day free
- **Edamam** (backup) - 10,000 requests/month free
- **USDA FoodData Central** - nutritional data

**API Caching Strategy:**
- Cache recipe search results (1 hour)
- Cache recipe details (24 hours)
- Cache nutritional data (permanent)
- Reduce API costs

---

### ğŸš€ **Deployment Considerations**

**Performance Optimization:**
- Next.js Image optimization (recipe images)
- ISR for popular recipes (regenerate daily)
- Edge caching for recipe data
- Lazy load recipe images

**SEO Strategy:**
- Each recipe = separate page (dynamic routes)
- Meta tags (recipe name, description)
- JSON-LD structured data (Recipe schema)
- Sitemap generation (popular recipes)
- OG images (recipe photos)

---