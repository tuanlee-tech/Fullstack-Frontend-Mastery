## 🧭 Catch-all Routes (Bắt tất cả đường dẫn con)

Catch-all routes giúp bạn tạo **route động linh hoạt**, cho phép nhận **nhiều segment** trong URL cùng lúc — thường dùng cho blog, docs, hoặc hệ thống có đường dẫn tự do.

---

### 🧱 1️⃣ Cấu trúc thư mục

Ví dụ:

```
app/docs/[...slug]/page.tsx
```

➡ URL hợp lệ:

| URL                           | params.slug                       |
| ----------------------------- | --------------------------------- |
| /docs                         | undefined                         |
| /docs/getting-started         | ["getting-started"]               |
| /docs/nextjs/routing          | ["nextjs", "routing"]             |
| /docs/nextjs/app-router/intro | ["nextjs", "app-router", "intro"] |

---

### 🧩 2️⃣ Code mẫu

```tsx
// app/docs/[...slug]/page.tsx

interface DocsPageProps {
  params: {
    slug?: string[];
  };
}

export default function DocsPage({ params }: DocsPageProps) {
  const slug = params.slug || [];

  return (
    <div style={{ padding: "1rem" }}>
      <h1>📘 Catch-all Route Example</h1>
      <p>
        <strong>Segments:</strong> {slug.join(" / ") || "(no segments)"}
      </p>
      <pre style={{ background: "#f4f4f4", padding: "1rem" }}>
        {JSON.stringify(params, null, 2)}
      </pre>
    </div>
  );
}
```

---

### 🧠 3️⃣ Giải thích

* `[...slug]` = “bắt tất cả các segment còn lại”
* `slug` là mảng chứa các phần trong URL
* Nếu không có segment nào → `slug` sẽ là `undefined` hoặc `[]`

---

### ⚡ 4️⃣ Optional Catch-all Route

Nếu bạn chỉ dùng `[...slug]`, thì `/docs` **sẽ 404**.
Để tránh điều này, dùng **`[[...slug]]`** (double bracket):

```
app/docs/[[...slug]]/page.tsx
```

→ `/docs` hoạt động bình thường, `params.slug` = `undefined`

---

### 🧩 5️⃣ Khi nào dùng

* Hệ thống tài liệu (Docs)
* URL SEO-friendly nhiều tầng
* Breadcrumb navigation
* Multi-level category / tag pages


Giờ ta làm ví dụ nâng cao cho **Catch-all Routes** — xây dựng **Docs Page** có **breadcrumb tự động**, giúp hiểu rõ cách xử lý `params.slug`.

---

## 🧭  Ứng dụng thực tế: Breadcrumb trong Catch-all Routes

### 🎯 Mục tiêu

* Hiểu cách chuyển mảng `params.slug` thành đường dẫn breadcrumb động
* Hiển thị từng cấp của đường dẫn tài liệu như `/docs/nextjs/routing/intro`

---

### 📂 Cấu trúc

```
app/
└── docs/
    └── [[...slug]]/
        └── page.tsx
```

---

### 💡 `page.tsx`

```tsx
// app/docs/[[...slug]]/page.tsx
"use client";
import Link from "next/link";

interface DocsPageProps {
  params: {
    slug?: string[];
  };
}

export default function DocsPage({ params }: DocsPageProps) {
  const slug = params.slug || [];

  // 🧭 Tạo breadcrumb động
  const breadcrumbs = slug.map((segment, index) => {
    const href = "/docs/" + slug.slice(0, index + 1).join("/");
    const label = segment.replace(/-/g, " ");
    return { href, label };
  });

  return (
    <div style={{ padding: "1rem" }}>
      <h1>📚 Documentation</h1>

      {/* 🔗 Breadcrumb */}
      <nav style={{ marginBottom: "1rem" }}>
        <Link href="/docs">Docs</Link>
        {breadcrumbs.map((crumb, i) => (
          <span key={i}>
            {" / "}
            <Link href={crumb.href}>{crumb.label}</Link>
          </span>
        ))}
      </nav>

      {/* 📄 Nội dung mô phỏng */}
      <section>
        {slug.length > 0 ? (
          <p>
            You are viewing docs for:{" "}
            <strong>{slug.join(" / ")}</strong>
          </p>
        ) : (
          <p>Welcome to the main Docs page!</p>
        )}
      </section>

      {/* 🧩 Debug */}
      <pre style={{ background: "#f7f7f7", padding: "1rem", marginTop: "1rem" }}>
        {JSON.stringify(params, null, 2)}
      </pre>
    </div>
  );
}
```

---

### ⚙️ Giải thích

* `[[...slug]]` cho phép cả `/docs` và `/docs/.../.../...`
* Khi `/docs/nextjs/routing/intro`:

  ```js
  params.slug = ["nextjs", "routing", "intro"];
  ```
* Breadcrumb tự sinh:

  ```
  Docs / nextjs / routing / intro
  ```

  → mỗi phần đều có thể click điều hướng.

---

### ✅ Kết quả

| URL                          | Breadcrumb                      |
| ---------------------------- | ------------------------------- |
| `/docs`                      | Docs                            |
| `/docs/nextjs`               | Docs / nextjs                   |
| `/docs/nextjs/routing`       | Docs / nextjs / routing         |
| `/docs/nextjs/routing/intro` | Docs / nextjs / routing / intro |

---

### 💬 Bài tập nhỏ

> Hãy mở rộng ví dụ trên:
>
> * Khi click breadcrumb, hiển thị nội dung giả lập tương ứng (ví dụ: “Trang: Next.js Routing Intro”)
> * Thêm CSS nhỏ để breadcrumb có hover màu xanh nhạt.


---
[<< BÀI 08](./08.md) | [BÀI 10 >>](./10.md)