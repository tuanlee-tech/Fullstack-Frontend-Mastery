# Ngày 21

## Document Object Model (DOM) - Ngày 1

Tài liệu HTML được cấu trúc như một đối tượng JavaScript. Mỗi phần tử HTML có các thuộc tính khác nhau giúp ta thao tác. Có thể lấy, tạo, chèn hoặc xóa phần tử HTML bằng JavaScript. Việc chọn phần tử HTML bằng JavaScript khá giống với chọn bằng CSS. Để chọn một phần tử HTML, ta có thể dùng tên thẻ, id, class hoặc các thuộc tính khác.

### Lấy phần tử

Chúng ta có thể truy cập phần tử đã được tạo bằng nhiều phương thức khác nhau. Ví dụ dưới có 4 thẻ *h1*.

#### Lấy theo tên thẻ

***getElementsByTagName()***: nhận tên thẻ, trả về **HTMLCollection** (giống mảng). Dùng `length` để biết số lượng, và dùng vòng lặp `for` để duyệt.

```js
const allTitles = document.getElementsByTagName('h1')
console.log(allTitles.length) // 4
for (let i = 0; i < allTitles.length; i++) {
  console.log(allTitles[i])
}
```

#### Lấy theo class

***getElementsByClassName()***: trả về HTMLCollection chứa các phần tử có cùng class.

```js
const allTitles = document.getElementsByClassName('title')
console.log(allTitles.length) // 4
```

#### Lấy theo id

***getElementById()***: trả về duy nhất một phần tử.

```js
let firstTitle = document.getElementById('first-title')
console.log(firstTitle) // <h1>First Title</h1>
```

#### Lấy bằng querySelector

* `querySelector`: chọn phần tử đầu tiên.
* `querySelectorAll`: chọn tất cả (NodeList, có thể dùng `forEach`).

```js
let firstTitle = document.querySelector('h1')
let byId = document.querySelector('#first-title')
let byClass = document.querySelector('.title')

const allTitles = document.querySelectorAll('h1')
allTitles.forEach(title => console.log(title))
```

---

### Thêm thuộc tính

Ví dụ thêm `id` và `class` cho thẻ h1 thứ 4.

```js
const titles = document.querySelectorAll('h1')
titles[3].className = 'title'
titles[3].id = 'fourth-title'
```

#### Dùng setAttribute

```js
titles[3].setAttribute('class', 'title')
titles[3].setAttribute('id', 'fourth-title')
```

#### Gán trực tiếp

```js
titles[3].className = 'title'
titles[3].id = 'fourth-title'
```

#### Dùng classList

* Thêm class mới mà không ghi đè:

```js
titles[3].classList.add('title', 'header-title')
```

* Xóa class:

```js
titles[3].classList.remove('title', 'header-title')
```

---

### Thêm nội dung văn bản

#### Dùng textContent

```js
titles[3].textContent = 'Fourth Title'
```

#### Dùng innerHTML

* Có thể gán text hoặc HTML:

```js
const ul = document.querySelector('ul')
ul.innerHTML = `
  <li>30DaysOfPython Challenge Done</li>
  <li>30DaysOfJavaScript Challenge Ongoing</li>
`
```

* Xóa tất cả con:

```js
ul.innerHTML = ''
```

---

### Thêm style

#### Đổi màu chữ

```js
titles.forEach((title, i) => {
  title.style.fontSize = '24px'
  title.style.color = i % 2 === 0 ? 'green' : 'red'
})
```

#### Đổi màu nền

```js
titles.forEach((title, i) => {
  title.style.backgroundColor = i % 2 === 0 ? 'green' : 'red'
})
```

#### Đổi font-size

```js
titles.forEach((title, i) => {
  title.style.fontSize = i % 2 === 0 ? '20px' : '30px'
})
```

> Lưu ý: CSS trong JS dùng camelCase (background-color → backgroundColor).

---

## Bài tập

### Bài tập Level 1

**Đề + Giải:**

1. Tạo file `index.html` và đặt 4 thẻ `<p>`.
2. Lấy đoạn đầu bằng `document.querySelector('p')`.
3. Lấy từng đoạn bằng `document.querySelector('#id')`.
4. Lấy tất cả đoạn bằng `document.querySelectorAll('p')`.
5. Duyệt NodeList và in `textContent`.
6. Đặt text cho đoạn 4 là `"Fourth Paragraph"`.
7. Thêm `id` và `class` cho tất cả đoạn.

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Level 1</title>
</head>
<body>
  <p id="p1">Paragraph One</p>
  <p id="p2">Paragraph Two</p>
  <p id="p3">Paragraph Three</p>
  <p id="p4">Paragraph Four (old)</p>

  <script>
    const firstP = document.querySelector('p')
    console.log(firstP.textContent)

    const p1 = document.querySelector('#p1')
    const p2 = document.querySelector('#p2')
    const p3 = document.querySelector('#p3')
    const p4 = document.querySelector('#p4')

    const allP = document.querySelectorAll('p')
    allP.forEach(p => console.log(p.textContent))

    p4.textContent = 'Fourth Paragraph'

    allP.forEach((p, i) => {
      p.setAttribute('class', `para-${i+1}`)
      p.id = `id-${i+1}`
    })
  </script>
</body>
</html>
```

---

### Bài tập Level 2

**Đề + Giải:**

1. Thay đổi style của mỗi đoạn (color, background, border, font-size...).
2. Đoạn 1 và 3 màu xanh, đoạn 2 và 4 màu đỏ.
3. Gán text, id, class cho từng đoạn.

```html
<script>
  const allP = document.querySelectorAll('p')

  allP.forEach((p, i) => {
    p.style.fontSize = '20px'
    p.style.fontFamily = 'Arial'
    p.style.border = '1px solid black'
    p.style.padding = '5px'

    if (i % 2 === 0) {
      p.style.color = 'green'
    } else {
      p.style.color = 'red'
    }

    p.textContent = `Paragraph ${i+1}`
    p.id = `p-${i+1}`
    p.className = `cls-${i+1}`
  })
</script>
```

---

### Bài tập Level 3 – Mini Project

**Đề:**

* Màu của năm đổi mỗi 1 giây.
* Ngày & giờ đổi màu nền mỗi giây.
* Challenge hoàn thành: nền xanh.
* Challenge đang làm: nền vàng.
* Challenge sắp tới: nền đỏ.

**Giải:**

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mini Project DOM</title>
</head>
<body>
  <div class="wrapper">
    <h1 id="year">Asabeneh Yetayeh challenges in 2020</h1>
    <h2>30DaysOfJavaScript Challenge</h2>
    <h3 id="time"></h3>
    <ul>
      <li>30DaysOfPython Challenge Done</li>
      <li>30DaysOfJavaScript Challenge Ongoing</li>
      <li>30DaysOfReact Challenge Coming</li>
      <li>30DaysOfFullStack Challenge Coming</li>
      <li>30DaysOfDataAnalysis Challenge Coming</li>
      <li>30DaysOfReactNative Challenge Coming</li>
      <li>30DaysOfMachineLearning Challenge Coming</li>
    </ul>
  </div>

  <script>
    const year = document.getElementById('year')
    const time = document.getElementById('time')
    const lis = document.querySelectorAll('li')

    // đổi màu năm mỗi 1s
    setInterval(() => {
      year.style.color = `hsl(${Math.random() * 360}, 100%, 50%)`
    }, 1000)

    // đổi màu nền cho thời gian
    setInterval(() => {
      const now = new Date()
      time.textContent = now.toLocaleString()
      time.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 70%)`
    }, 1000)

    // style cho list
    lis.forEach(li => {
      if (li.textContent.includes('Done')) {
        li.style.backgroundColor = 'green'
      } else if (li.textContent.includes('Ongoing')) {
        li.style.backgroundColor = 'yellow'
      } else {
        li.style.backgroundColor = 'red'
      }
      li.style.margin = '5px'
      li.style.padding = '5px'
      li.style.listStyle = 'none'
    })
  </script>
</body>
</html>
```

---
[<< Ngày 20](./20.Writing_Clean_Code.md) | [Ngày 22 >>](./22.Manipulating_DOM_Object.md)