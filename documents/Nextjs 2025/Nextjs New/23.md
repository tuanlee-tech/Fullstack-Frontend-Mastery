
## ğŸ§­  Templates

### ğŸ¯ Má»¥c tiÃªu

* Hiá»ƒu **Templates** lÃ  gÃ¬ vÃ  cÃ¡ch Next.js dÃ¹ng Ä‘á»ƒ **tÃ¡i sá»­ dá»¥ng layout/page structure**
* GiÃºp **trÃ¡nh láº·p code** cho cÃ¡c page cÃ³ cáº¥u trÃºc giá»‘ng nhau

---

## ğŸ§± 1ï¸âƒ£ Template lÃ  gÃ¬?

* Template = **má»™t page/layout Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a sáºµn**
* CÃ³ thá»ƒ **reuse** cho nhiá»u route mÃ  chá»‰ thay Ä‘á»•i dá»¯ liá»‡u/children
* Giá»‘ng nhÆ° **component nhÆ°ng cho toÃ n page**

VÃ­ dá»¥: Má»™t template cho blog post

```
app/
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ BlogTemplate.tsx
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ [slug]/
â”‚   â”‚   â””â”€â”€ page.tsx
```

---

## ğŸ§© 2ï¸âƒ£ VÃ­ dá»¥ BlogTemplate

```tsx
// app/templates/BlogTemplate.tsx
export default function BlogTemplate({ children }: { children: React.ReactNode }) {
  return (
    <div style={{ maxWidth: 800, margin: "0 auto", padding: "1rem" }}>
      <header>
        <h1>My Blog</h1>
        <hr />
      </header>
      <main>{children}</main>
      <footer>
        <hr />
        <p>Â© 2025 BlogApp</p>
      </footer>
    </div>
  );
}
```

---

## ğŸ“„ 3ï¸âƒ£ Sá»­ dá»¥ng template trong page

```tsx
// app/blog/[slug]/page.tsx
import BlogTemplate from "../../templates/BlogTemplate";

interface BlogPageProps {
  params: { slug: string };
}

export default function BlogPage({ params }: BlogPageProps) {
  return (
    <BlogTemplate>
      <article>
        <h2>{params.slug}</h2>
        <p>Content for {params.slug}</p>
      </article>
    </BlogTemplate>
  );
}
```

* Má»—i post sáº½ **reuse template**, chá»‰ thay content riÃªng
* KhÃ´ng cáº§n láº·p láº¡i header/footer cho tá»«ng page

---

## ğŸ’¡ 4ï¸âƒ£ LÆ°u Ã½

* Templates giÃºp **DRY code** (Donâ€™t Repeat Yourself)
* ThÆ°á»ng dÃ¹ng cho **section hoáº·c feature giá»‘ng nhau**
* Káº¿t há»£p tá»‘t vá»›i **Nested Layouts** Ä‘á»ƒ giá»¯ state cá»§a layout

---

# âš”ï¸ **So sÃ¡nh chi tiáº¿t: `layout.tsx` vs `template.tsx`**

| TiÃªu chÃ­                            | `layout.tsx`                                                                       | `template.tsx`                                                                       |
| ----------------------------------- | ---------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------ |
| ğŸ§± **Chá»©c nÄƒng chÃ­nh**              | LÃ  *Persistent Layout* â€” giá»¯ nguyÃªn giá»¯a cÃ¡c láº§n Ä‘iá»u hÆ°á»›ng trong cÃ¹ng nhÃ¡nh route | LÃ  *Isolated Layout* â€” render láº¡i hoÃ n toÃ n má»—i khi route thay Ä‘á»•i                   |
| â™»ï¸ **CÆ¡ cháº¿ render**                | Reuse (khÃ´ng bá»‹ unmount khi chuyá»ƒn route con)                                      | Recreate (bá»‹ unmount vÃ  mount láº¡i má»—i láº§n chuyá»ƒn route con)                          |
| âš™ï¸ **State trong layout**           | Giá»¯ nguyÃªn khi Ä‘iá»u hÆ°á»›ng giá»¯a cÃ¡c route con                                       | Máº¥t toÃ n bá»™, reset láº¡i má»—i láº§n chuyá»ƒn route                                          |
| ğŸ’¨ **Hiá»‡u nÄƒng**                    | Nhanh hÆ¡n (vÃ¬ chá»‰ thay Ä‘á»•i `children`)                                             | Cháº­m hÆ¡n (vÃ¬ toÃ n bá»™ component render láº¡i)                                           |
| ğŸ”„ **Khi nÃ o cháº¡y láº¡i `useEffect`** | Chá»‰ khi layout bá»‹ unmount (vÃ­ dá»¥ Ä‘á»•i nhÃ³m layout)                                  | Má»—i láº§n Ä‘á»•i route con, `useEffect` cháº¡y láº¡i                                          |
| ğŸ§­ **Khi nÃ o dÃ¹ng**                 | Khi báº¡n muá»‘n **giá»¯ UI cá»‘ Ä‘á»‹nh** (sidebar, navbar, global state)                    | Khi báº¡n muá»‘n **reset toÃ n bá»™ UI** (wizard form, animation intro, transition Ä‘á»™c láº­p) |
| ğŸ“„ **Vá»‹ trÃ­ file**                  | `app/(group)/layout.tsx`                                                           | `app/(group)/template.tsx`                                                           |
| ğŸ§© **Thay tháº¿ nhau Ä‘Æ°á»£c khÃ´ng?**    | CÃ³ thá»ƒ, nhÆ°ng hÃ nh vi khÃ¡c (layout khÃ´ng reset state)                              | CÃ³ thá»ƒ, nhÆ°ng template sáº½ reset state má»—i láº§n route thay Ä‘á»•i                         |
| ğŸš« **Bá»‹ giá»›i háº¡n**                  | KhÃ´ng thá»ƒ dÃ¹ng Ä‘á»ƒ reset animation má»—i page                                         | KhÃ´ng thá»ƒ giá»¯ state lÃ¢u dÃ i giá»¯a cÃ¡c trang con                                       |

---

## ğŸ¨ **VÃ­ dá»¥ minh há»a:**

Giáº£ sá»­ cáº¥u trÃºc:

```
app/
 â”œâ”€ (dashboard)/
 â”‚   â”œâ”€ layout.tsx
 â”‚   â”œâ”€ dashboard/page.tsx
 â”‚   â””â”€ settings/page.tsx
 â””â”€ (auth)/
     â”œâ”€ template.tsx
     â”œâ”€ login/page.tsx
     â””â”€ register/page.tsx
```

---

### ğŸ”¹ `layout.tsx` (Dashboard â€” Persistent)

```tsx
"use client";
import { useState } from "react";

export default function DashboardLayout({ children }: { children: React.ReactNode }) {
  const [count, setCount] = useState(0);

  return (
    <div className="flex">
      <aside className="w-64 bg-gray-800 text-white p-4">
        <p>Dashboard Layout</p>
        <button onClick={() => setCount(count + 1)}>Count: {count}</button>
      </aside>
      <main className="flex-1 p-4">{children}</main>
    </div>
  );
}
```

â¡ï¸ Khi báº¡n chuyá»ƒn giá»¯a `/dashboard` â†” `/settings`:

* `DashboardLayout` **khÃ´ng bá»‹ render láº¡i**
* Biáº¿n `count` **giá»¯ nguyÃªn giÃ¡ trá»‹**

---

### ğŸ”¸ `template.tsx` (Auth â€” Isolated)

```tsx
"use client";
import { useState } from "react";

export default function AuthTemplate({ children }: { children: React.ReactNode }) {
  const [count, setCount] = useState(0);

  return (
    <div className="min-h-screen flex flex-col items-center justify-center">
      <p>Auth Template</p>
      <button onClick={() => setCount(count + 1)}>Count: {count}</button>
      <div className="mt-4">{children}</div>
    </div>
  );
}
```

â¡ï¸ Khi báº¡n chuyá»ƒn `/login` â†” `/register`:

* `AuthTemplate` **bá»‹ unmount vÃ  mount láº¡i**
* Biáº¿n `count` **reset vá» 0**

---

## ğŸ§  **Hiá»ƒu sÃ¢u cÆ¡ cháº¿**

| KhÃ¡i niá»‡m                 | Layout                                      | Template                                            |
| ------------------------- | ------------------------------------------- | --------------------------------------------------- |
| **Rendering model**       | Persistent React tree                       | Recreated React tree                                |
| **Transition**            | Giá»¯ nguyÃªn layout â†’ chá»‰ render láº¡i children | XÃ³a toÃ n bá»™ DOM â†’ render láº¡i tá»« Ä‘áº§u                 |
| **useEffect** / **state** | Persist                                     | Reset                                               |
| **Performance**           | Tá»‘t hÆ¡n                                     | Tá»‘n hÆ¡n                                             |
| **UX phÃ¹ há»£p cho**        | App cÃ³ sidebar, dashboard, header           | Page riÃªng biá»‡t: login, animation intro, onboarding |

---

## ğŸ’¬ **TÃ³m táº¯t dá»… nhá»›**

> ğŸ§© **layout.tsx** = â€œKhung xÆ°Æ¡ng cá»‘ Ä‘á»‹nhâ€
> DÃ¹ng cho UI lÃ¢u dÃ i (Navbar, Sidebar, Theme, Auth wrapper, ...)

> ğŸï¸ **template.tsx** = â€œTrang má»›i hoÃ n toÃ nâ€
> DÃ¹ng khi báº¡n muá»‘n má»—i trang **reset láº¡i má»i thá»©** (form, animation, transition page).

---

## ğŸ’¡ VÃ­ dá»¥ thá»±c táº¿

| TÃ¬nh huá»‘ng                                        | NÃªn dÃ¹ng          |
| ------------------------------------------------- | ----------------- |
| Dashboard cÃ³ sidebar, giá»¯ láº¡i khi Ä‘á»•i trang       | `layout.tsx`      |
| Login â†’ Register, cáº§n reset form & animation      | `template.tsx`    |
| Onboarding tá»«ng bÆ°á»›c, cáº§n reset hiá»‡u á»©ng má»—i bÆ°á»›c | `template.tsx`    |
| Global layout (header, footer) cho toÃ n site      | Root `layout.tsx` |

---

## âš™ï¸ Pro Tip:

Báº¡n **cÃ³ thá»ƒ káº¿t há»£p cáº£ 2 cÃ¹ng lÃºc**:

```
app/
 â”œâ”€ layout.tsx        â† Root layout (global header/footer)
 â””â”€ (auth)/
     â”œâ”€ template.tsx  â† Reset má»—i láº§n Ä‘á»•i trang
     â””â”€ login/page.tsx
```

ğŸ‘‰ Káº¿t quáº£:
RootLayout váº«n bao ngoÃ i, nhÆ°ng template bÃªn trong váº«n reset má»—i láº§n `/login` â†” `/register`.

---

[<< BÃ€I 22](./22.md) | [BÃ€I 24 >>](./24.md)