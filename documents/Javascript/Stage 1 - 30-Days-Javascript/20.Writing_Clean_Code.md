# Ngày 20

## Viết mã sạch (Writing Clean Code)

### Hướng dẫn kiểu mã JavaScript (JavaScript Style Guide)

**Hướng dẫn kiểu mã** (style guide) là tập hợp các quy tắc về cách viết và tổ chức mã JavaScript để đảm bảo tính nhất quán, dễ đọc và dễ bảo trì. JavaScript có cú pháp giống như ngôn ngữ tự nhiên, và việc tuân theo các quy tắc kiểu mã giúp mã dễ hiểu hơn.

### Tại sao cần hướng dẫn kiểu mã?

Khi làm việc cá nhân, bạn có thể viết mã theo cách riêng miễn là nó chạy được. Tuy nhiên, trong môi trường làm việc nhóm với nhiều lập trình viên cùng làm trên một dự án, mã không theo quy tắc sẽ trở nên lộn xộn, khó quản lý. Hướng dẫn kiểu mã giúp:

- **Viết mã sạch**: Dễ đọc và hiểu.
- **Cải thiện khả năng bảo trì**: Dễ dàng sửa đổi và mở rộng.
- **Tăng khả năng tái sử dụng**: Mã có thể được sử dụng lại trong các dự án khác.

Một số hướng dẫn kiểu mã phổ biến:

- **Airbnb JavaScript Style Guide**: Phổ biến, chi tiết, được nhiều nhà phát triển và công ty áp dụng. [Xem tại đây](https://github.com/airbnb/javascript).
- **Standard JavaScript Style Guide**: Loại bỏ dấu chấm phẩy, đơn giản nhưng ít phổ biến hơn. [Xem tại đây](https://standardjs.com/).
- **Google JavaScript Style Guide**: Hướng dẫn của Google, chi tiết và nghiêm ngặt. [Xem tại đây](https://google.github.io/styleguide/jsguide.html).

### Quy ước mã hóa JavaScript (JavaScript Coding Conventions)

Quy ước mã hóa bao gồm các quy tắc về đặt tên, khai báo, sử dụng khoảng trắng, thụt lề, chú thích và các nguyên tắc lập trình. Quy ước giúp cải thiện:

- **Tính dễ đọc**: Mã dễ hiểu hơn.
- **Tính bảo trì**: Dễ dàng cập nhật và sửa lỗi.
- **Tính nhất quán**: Mã đồng bộ trong toàn dự án.

#### Quy ước trong 30DaysOfJavaScript

Trong khóa học này, chúng ta sử dụng các quy ước JavaScript phổ biến kết hợp với sở thích cá nhân của tác giả:

- **Sử dụng camelCase** cho tên biến và hàm.
- **Tên biến bắt đầu bằng chữ cái**.
- Sử dụng `const` cho hằng số, mảng, đối tượng và hàm.
- Sử dụng **dấu nháy đơn** (`'`) hoặc **dấu backtick** (`) thay vì dấu nháy kép (`"`).
- **Loại bỏ dấu chấm phẩy** (tùy chọn cá nhân).
- **Khoảng trắng** quanh toán tử số học, toán tử gán và sau dấu phẩy.
- Sử dụng **hàm mũi tên** (arrow function) thay vì khai báo hàm truyền thống.
- **Trả về rõ ràng** (explicit return) trong hàm một dòng thay vì trả về ngầm (implicit return).
- **Không để dấu phẩy cuối** trong giá trị cuối của đối tượng.
- Sử dụng các toán tử gán ngắn gọn (`+=`, `-=`, `*=`, `/=`, `**=`) thay vì dạng dài.
- Khi dùng `console.log()`, thêm **chuỗi nhận diện** để biết nguồn gốc của console.

#### Biến (Variables)

```js
const firstName = 'Asabeneh'
const lastName = 'Yetayeh'
const country = 'Finland'
const city = 'Helsinki'

const PI = Math.PI
const gravity = 9.81
```

#### Mảng (Arrays)

Tên mảng nên ở dạng số nhiều để biểu thị tập hợp.

```js
const names = ['Asabeneh', 'Mathias', 'Elias', 'Brook']
const numbers = [0, 3.14, 9.81, 37, 98.6, 100]
const countries = ['Finland', 'Denmark', 'Sweden', 'Norway', 'Iceland']
const languages = ['Amharic', 'Arabic', 'English', 'French', 'Spanish']
const skills = ['HTML', 'CSS', 'JavaScript', 'React', 'Python']
const fruits = ['banana', 'orange', 'mango', 'lemon']
const vegetables = ['Tomato', 'Potato', 'Cabbage', 'Onion', 'Carrot']
```

#### Hàm (Functions)

Ưu tiên sử dụng **hàm mũi tên** (arrow function) và trả về rõ ràng cho hàm một dòng.

```js
const printFullName = (firstName, lastName) => `${firstName} ${lastName}`

const square = n => n * n

const hexaColor = () => {
  const str = '0123456789abcdef'
  let hexa = '#'
  for (let i = 0; i < 6; i++) {
    const index = Math.floor(Math.random() * str.length)
    hexa += str[index]
  }
  return hexa
}

const showDateTime = () => {
  const now = new Date()
  const year = now.getFullYear()
  const month = now.getMonth() + 1
  const date = now.getDate()
  let hours = now.getHours()
  let minutes = now.getMinutes()
  if (hours < 10) hours = `0${hours}`
  if (minutes < 10) minutes = `0${minutes}`
  return `${date}.${month}.${year} ${hours}:${minutes}`
}
```

Ghi chú: Có thể sử dụng `new Date().toLocaleString()` để hiển thị ngày giờ, tùy thuộc vào định dạng mong muốn ([Xem thêm](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleString)).

#### Vòng lặp (Loops)

Sử dụng các loại vòng lặp: `for`, `while`, `do while`, `for...of`, `forEach`, `for...in`.

```js
const names = ['Asabeneh', 'Mathias', 'Elias', 'Brook']

// Vòng lặp for thông thường
for (let i = 0; i < names.length; i++) {
  console.log(names[i].toUpperCase())
}

// Vòng lặp for...of
for (const name of names) {
  console.log(name.toUpperCase())
}

// Vòng lặp forEach
names.forEach(name => console.log(name.toUpperCase()))

// Lặp qua đối tượng với for...in
const person = {
  firstName: 'Asabeneh',
  lastName: 'Yetayeh',
  age: 250,
  country: 'Finland',
  city: 'Helsinki'
}
for (const key in person) {
  console.log(`${key}: ${person[key]}`)
}
```

#### Đối tượng (Objects)

Khai báo đối tượng với `const`.

```js
const person = {
  firstName: 'Asabeneh',
  lastName: 'Yetayeh',
  age: 250,
  country: 'Finland',
  city: 'Helsinki',
  skills: ['HTML', 'CSS', 'JavaScript', 'TypeScript', 'React', 'Node', 'MongoDB', 'Python', 'D3.js']
}

for (const key in person) {
  console.log(`${key}: ${person[key]}`)
}
```

#### Điều kiện (Conditional)

Sử dụng `if`, `if else`, `if else if`, `switch`, và toán tử ba ngôi (ternary).

```js
// if else
const num = 3
if (num > 0) {
  console.log(`${num} is a positive number`)
} else {
  console.log(`${num} is a negative number`)
}

// if else if else
const a = 0
if (a > 0) {
  console.log(`${a} is a positive number`)
} else if (a < 0) {
  console.log(`${a} is a negative number`)
} else if (a === 0) {
  console.log(`${a} is zero`)
} else {
  console.log(`${a} is not a number`)
}

// switch
const day = prompt('What day is today?').toLowerCase()
switch (day) {
  case 'monday':
    console.log('Today is Monday')
    break
  case 'tuesday':
    console.log('Today is Tuesday')
    break
  // ... các case khác
  default:
    console.log('It is not a week day.')
}

// ternary
const isRaining = true
isRaining
  ? console.log('You need a rain coat.')
  : console.log('No need for a rain coat.')
```

#### Lớp (Classes)

Khai báo lớp sử dụng **CamelCase** với chữ cái đầu tiên in hoa.

```js
class Person {
  constructor(firstName, lastName) {
    this.firstName = firstName
    this.lastName = lastName
  }
}

const person = new Person('Asabeneh', 'Yetayeh')
console.log(person) // Person { firstName: 'Asabeneh', lastName: 'Yetayeh' }
```

### Lời khuyên

- **Nhất quán**: Dù bạn chọn hướng dẫn kiểu mã nào, hãy tuân thủ nhất quán.
- **Sử dụng mô hình lập trình**: Áp dụng các mẫu thiết kế (design patterns) để tổ chức mã tốt hơn.
- **Viết mã dễ đọc**: Mã sạch giúp bạn và đồng nghiệp dễ dàng hiểu và bảo trì.

---

[<< Ngày 19](./19.Closures.md) | [Ngày 21 >>](./21.DOM.md)
